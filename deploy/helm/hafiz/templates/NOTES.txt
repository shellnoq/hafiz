ğŸ‰ Hafiz S3-compatible object storage has been deployed!

{{- if .Values.ingress.enabled }}
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ“¡ S3 API Endpoint:
{{- range .Values.ingress.hosts }}
   https://{{ .host }}
{{- end }}
{{- else }}

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ“¡ S3 API Access:

  To access the S3 API from within the cluster:
    http://{{ include "hafiz.fullname" . }}.{{ .Release.Namespace }}.svc:{{ .Values.service.port }}

  To access from outside the cluster:
{{- if eq .Values.service.type "NodePort" }}
    export NODE_PORT=$(kubectl get --namespace {{ .Release.Namespace }} -o jsonpath="{.spec.ports[0].nodePort}" services {{ include "hafiz.fullname" . }})
    export NODE_IP=$(kubectl get nodes --namespace {{ .Release.Namespace }} -o jsonpath="{.items[0].status.addresses[0].address}")
    echo http://$NODE_IP:$NODE_PORT
{{- else if eq .Values.service.type "LoadBalancer" }}
    NOTE: It may take a few minutes for the LoadBalancer IP to be available.
    kubectl get --namespace {{ .Release.Namespace }} svc {{ include "hafiz.fullname" . }} -w
{{- else }}
    kubectl port-forward --namespace {{ .Release.Namespace }} svc/{{ include "hafiz.fullname" . }} {{ .Values.service.port }}:{{ .Values.service.port }}
    echo http://localhost:{{ .Values.service.port }}
{{- end }}
{{- end }}

{{- if .Values.hafiz.admin.enabled }}

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ”§ Admin Console:
{{- if .Values.adminIngress.enabled }}
{{- range .Values.adminIngress.hosts }}
   https://{{ .host }}
{{- end }}
{{- else }}
   kubectl port-forward --namespace {{ .Release.Namespace }} svc/{{ include "hafiz.fullname" . }}-admin {{ .Values.adminService.port }}:{{ .Values.adminService.port }}
   echo http://localhost:{{ .Values.adminService.port }}
{{- end }}

   Username: {{ .Values.hafiz.admin.username }}
   Password: kubectl get secret --namespace {{ .Release.Namespace }} {{ include "hafiz.admin.secretName" . }} -o jsonpath="{.data.admin-password}" | base64 -d
{{- end }}

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ”‘ Credentials:

  Get root access key:
    kubectl get secret --namespace {{ .Release.Namespace }} {{ include "hafiz.auth.secretName" . }} -o jsonpath="{.data.access-key}" | base64 -d

  Get root secret key:
    kubectl get secret --namespace {{ .Release.Namespace }} {{ include "hafiz.auth.secretName" . }} -o jsonpath="{.data.secret-key}" | base64 -d

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ“‹ Quick Start:

  1. Configure AWS CLI or Hafiz CLI:

     export AWS_ACCESS_KEY_ID=$(kubectl get secret --namespace {{ .Release.Namespace }} {{ include "hafiz.auth.secretName" . }} -o jsonpath="{.data.access-key}" | base64 -d)
     export AWS_SECRET_ACCESS_KEY=$(kubectl get secret --namespace {{ .Release.Namespace }} {{ include "hafiz.auth.secretName" . }} -o jsonpath="{.data.secret-key}" | base64 -d)
{{- if .Values.ingress.enabled }}
{{- range .Values.ingress.hosts }}
     export AWS_ENDPOINT_URL=https://{{ .host }}
{{- end }}
{{- else }}
     export AWS_ENDPOINT_URL=http://localhost:{{ .Values.service.port }}
{{- end }}

  2. Create a bucket:
     aws s3 mb s3://my-bucket --endpoint-url $AWS_ENDPOINT_URL

  3. Upload a file:
     aws s3 cp myfile.txt s3://my-bucket/ --endpoint-url $AWS_ENDPOINT_URL

  4. List objects:
     aws s3 ls s3://my-bucket/ --endpoint-url $AWS_ENDPOINT_URL

{{- if .Values.metrics.enabled }}

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ“Š Metrics:

  Prometheus metrics available at:
    http://{{ include "hafiz.fullname" . }}-metrics.{{ .Release.Namespace }}.svc:{{ .Values.metrics.port }}{{ .Values.metrics.path }}

{{- if .Values.metrics.serviceMonitor.enabled }}
  ServiceMonitor is enabled for Prometheus Operator auto-discovery.
{{- end }}
{{- end }}

{{- if .Values.hafiz.cluster.enabled }}

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸŒ Cluster Mode:

  Hafiz is running in cluster mode with {{ .Values.replicaCount }} replicas.
  
  Check cluster status:
    kubectl get pods --namespace {{ .Release.Namespace }} -l "app.kubernetes.io/name={{ include "hafiz.name" . }}"
{{- end }}

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ“š Documentation:
   https://github.com/yourorg/hafiz

ğŸ› Report Issues:
   https://github.com/yourorg/hafiz/issues

Thank you for using Hafiz! ğŸš€
