{"config":{"lang":["en"],"separator":"[\\s\\-,:!=\\[\\]()\"`/]+|\\.(?!\\d)|&[lg]t;|(?!\\b)(?=[A-Z][a-z])","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Hafiz","text":"<p> Enterprise-grade S3-compatible object storage written in Rust </p> <p> </p> <p>Hafiz (\u062d\u0627\u0641\u0638 - \"Guardian\" in Arabic/Turkish) is a high-performance, S3-compatible object storage system. Built from the ground up in Rust for memory safety, performance, and reliability.</p>"},{"location":"#why-hafiz","title":"Why Hafiz?","text":"<ul> <li> <p> High Performance</p> <p>Built in Rust with async I/O for maximum throughput and minimal latency.</p> </li> <li> <p> Enterprise Security</p> <p>AES-256-GCM encryption, Object Lock (WORM), LDAP integration.</p> </li> <li> <p> S3 Compatible</p> <p>Works with AWS SDKs, CLI, and existing S3 tools.</p> </li> <li> <p> Cloud Native</p> <p>Helm chart, Docker images, Prometheus metrics.</p> </li> </ul>"},{"location":"#quick-start","title":"Quick Start","text":"DockerDocker ComposeKubernetesBinary <pre><code>docker run -d \\\n  --name hafiz \\\n  -p 9000:9000 \\\n  -p 9001:9001 \\\n  -v hafiz-data:/data \\\n  -e HAFIZ_ROOT_ACCESS_KEY=hafizadmin \\\n  -e HAFIZ_ROOT_SECRET_KEY=hafizadmin \\\n  ghcr.io/shellnoq/hafiz:latest\n</code></pre> <pre><code>git clone https://github.com/shellnoq/hafiz.git\ncd hafiz\ndocker-compose up -d\n</code></pre> <pre><code>helm repo add hafiz https://shellnoq.github.io/hafiz\nhelm install hafiz hafiz/hafiz --namespace hafiz --create-namespace\n</code></pre> <pre><code>curl -LO https://github.com/shellnoq/hafiz/releases/latest/download/hafiz-linux-amd64.tar.gz\ntar xzf hafiz-linux-amd64.tar.gz\n./hafiz-server\n</code></pre>"},{"location":"#features","title":"Features","text":""},{"location":"#core-storage","title":"Core Storage","text":"Feature Status Bucket Operations Object Operations Multipart Uploads Versioning Lifecycle Policies Storage Classes"},{"location":"#security","title":"Security","text":"Feature Status AWS Signature V4 Server-Side Encryption Object Lock (WORM) Bucket Policies LDAP Integration TLS"},{"location":"#operations","title":"Operations","text":"Feature Status Admin API Prometheus Metrics Event Notifications Access Logging Health Checks"},{"location":"#comparison","title":"Comparison","text":"Feature Hafiz MinIO AWS S3 S3 Compatible Object Lock LDAP Enterprise Written in Rust  Go License Apache 2.0 AGPL N/A Self-Hosted"},{"location":"#getting-help","title":"Getting Help","text":"<ul> <li> GitHub Issues</li> <li> GitHub Discussions</li> <li> Documentation</li> </ul>"},{"location":"#license","title":"License","text":"<p>Hafiz is open source under the Apache License 2.0.</p>"},{"location":"api/","title":"API Reference","text":"<p>Hafiz implements the Amazon S3 REST API, providing compatibility with existing tools and SDKs.</p>"},{"location":"api/#base-url","title":"Base URL","text":"<pre><code>http://localhost:9000    # Development\nhttps://s3.example.com   # Production\n</code></pre>"},{"location":"api/#authentication","title":"Authentication","text":"<p>All requests must be authenticated using AWS Signature Version 4.</p> <p> Authentication Details</p>"},{"location":"api/#api-sections","title":"API Sections","text":"<ul> <li> <p> Bucket Operations</p> <p>Create, delete, list, and configure buckets.</p> <p> Bucket API</p> </li> <li> <p> Object Operations</p> <p>Upload, download, delete, and manage objects.</p> <p> Object API</p> </li> <li> <p> Error Codes</p> <p>S3-compatible error responses.</p> <p> Error Codes</p> </li> </ul>"},{"location":"api/#quick-reference","title":"Quick Reference","text":""},{"location":"api/#bucket-operations","title":"Bucket Operations","text":"Operation Method Path List Buckets <code>GET</code> <code>/</code> Create Bucket <code>PUT</code> <code>/{bucket}</code> Delete Bucket <code>DELETE</code> <code>/{bucket}</code> Head Bucket <code>HEAD</code> <code>/{bucket}</code> Get Location <code>GET</code> <code>/{bucket}?location</code> Get Versioning <code>GET</code> <code>/{bucket}?versioning</code> Put Versioning <code>PUT</code> <code>/{bucket}?versioning</code> Get Policy <code>GET</code> <code>/{bucket}?policy</code> Put Policy <code>PUT</code> <code>/{bucket}?policy</code>"},{"location":"api/#object-operations","title":"Object Operations","text":"Operation Method Path List Objects <code>GET</code> <code>/{bucket}?list-type=2</code> Get Object <code>GET</code> <code>/{bucket}/{key}</code> Put Object <code>PUT</code> <code>/{bucket}/{key}</code> Delete Object <code>DELETE</code> <code>/{bucket}/{key}</code> Head Object <code>HEAD</code> <code>/{bucket}/{key}</code> Copy Object <code>PUT</code> <code>/{bucket}/{key}</code> + <code>x-amz-copy-source</code>"},{"location":"api/#multipart-upload","title":"Multipart Upload","text":"Operation Method Path Create Upload <code>POST</code> <code>/{bucket}/{key}?uploads</code> Upload Part <code>PUT</code> <code>/{bucket}/{key}?uploadId=X&amp;partNumber=N</code> Complete Upload <code>POST</code> <code>/{bucket}/{key}?uploadId=X</code> Abort Upload <code>DELETE</code> <code>/{bucket}/{key}?uploadId=X</code>"},{"location":"api/#response-format","title":"Response Format","text":"<p>All responses use XML format:</p> <pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;ListBucketResult&gt;\n  &lt;Name&gt;my-bucket&lt;/Name&gt;\n  &lt;Contents&gt;\n    &lt;Key&gt;file.txt&lt;/Key&gt;\n    &lt;Size&gt;1024&lt;/Size&gt;\n    &lt;LastModified&gt;2024-01-01T00:00:00.000Z&lt;/LastModified&gt;\n  &lt;/Contents&gt;\n&lt;/ListBucketResult&gt;\n</code></pre>"},{"location":"api/#common-headers","title":"Common Headers","text":""},{"location":"api/#request-headers","title":"Request Headers","text":"Header Description <code>Authorization</code> AWS Signature V4 <code>x-amz-date</code> Request timestamp <code>x-amz-content-sha256</code> Payload hash <code>Content-Type</code> MIME type <code>Content-MD5</code> Payload integrity"},{"location":"api/#response-headers","title":"Response Headers","text":"Header Description <code>ETag</code> Object hash <code>x-amz-request-id</code> Request ID <code>x-amz-version-id</code> Object version <code>Last-Modified</code> Modification time"},{"location":"api/authentication/","title":"Authentication","text":"<p>Hafiz uses AWS Signature Version 4 for request authentication.</p>"},{"location":"api/authentication/#aws-signature-v4","title":"AWS Signature V4","text":"<p>All requests must include a valid signature in the <code>Authorization</code> header.</p>"},{"location":"api/authentication/#header-format","title":"Header Format","text":"<pre><code>Authorization: AWS4-HMAC-SHA256 \n    Credential=ACCESS_KEY/DATE/REGION/s3/aws4_request,\n    SignedHeaders=host;x-amz-date,\n    Signature=CALCULATED_SIGNATURE\n</code></pre>"},{"location":"api/authentication/#required-headers","title":"Required Headers","text":"Header Description Example <code>Authorization</code> Signature <code>AWS4-HMAC-SHA256 ...</code> <code>x-amz-date</code> Timestamp <code>20240101T000000Z</code> <code>x-amz-content-sha256</code> Payload hash <code>UNSIGNED-PAYLOAD</code> <code>Host</code> Server hostname <code>s3.example.com</code>"},{"location":"api/authentication/#using-aws-sdks","title":"Using AWS SDKs","text":"<p>SDKs handle signing automatically:</p> PythonJavaScriptAWS CLI <pre><code>import boto3\n\ns3 = boto3.client('s3',\n    endpoint_url='http://localhost:9000',\n    aws_access_key_id='YOUR_ACCESS_KEY',\n    aws_secret_access_key='YOUR_SECRET_KEY',\n    region_name='us-east-1'\n)\n</code></pre> <pre><code>import { S3Client } from \"@aws-sdk/client-s3\";\n\nconst client = new S3Client({\n  endpoint: \"http://localhost:9000\",\n  region: \"us-east-1\",\n  credentials: {\n    accessKeyId: \"YOUR_ACCESS_KEY\",\n    secretAccessKey: \"YOUR_SECRET_KEY\",\n  },\n  forcePathStyle: true,\n});\n</code></pre> <pre><code>aws configure set aws_access_key_id YOUR_ACCESS_KEY\naws configure set aws_secret_access_key YOUR_SECRET_KEY\naws configure set region us-east-1\n</code></pre>"},{"location":"api/authentication/#presigned-urls","title":"Presigned URLs","text":"<p>Generate time-limited URLs that don't require credentials:</p> <pre><code># Generate presigned URL (valid 1 hour)\naws --endpoint-url http://localhost:9000 s3 presign \\\n    s3://my-bucket/file.txt --expires-in 3600\n</code></pre> <p>Result: <pre><code>http://localhost:9000/my-bucket/file.txt?X-Amz-Algorithm=AWS4-HMAC-SHA256&amp;X-Amz-Credential=...\n</code></pre></p>"},{"location":"api/authentication/#signature-v2-legacy","title":"Signature V2 (Legacy)","text":"<p>Hafiz also supports the older Signature V2 for compatibility:</p> <pre><code>Authorization: AWS ACCESS_KEY:SIGNATURE\n</code></pre> <p>Deprecated</p> <p>Signature V2 is deprecated. Use Signature V4 for new applications.</p>"},{"location":"api/buckets/","title":"Bucket Operations","text":""},{"location":"api/buckets/#listbuckets","title":"ListBuckets","text":"<p>Lists all buckets owned by the authenticated user.</p> <p>Request: <pre><code>GET / HTTP/1.1\nHost: s3.example.com\n</code></pre></p> <p>Response: <pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;ListAllMyBucketsResult&gt;\n  &lt;Owner&gt;\n    &lt;ID&gt;user-id&lt;/ID&gt;\n    &lt;DisplayName&gt;username&lt;/DisplayName&gt;\n  &lt;/Owner&gt;\n  &lt;Buckets&gt;\n    &lt;Bucket&gt;\n      &lt;n&gt;my-bucket&lt;/n&gt;\n      &lt;CreationDate&gt;2024-01-01T00:00:00.000Z&lt;/CreationDate&gt;\n    &lt;/Bucket&gt;\n  &lt;/Buckets&gt;\n&lt;/ListAllMyBucketsResult&gt;\n</code></pre></p>"},{"location":"api/buckets/#createbucket","title":"CreateBucket","text":"<p>Creates a new bucket.</p> <p>Request: <pre><code>PUT /my-bucket HTTP/1.1\nHost: s3.example.com\n</code></pre></p> <p>With region: <pre><code>&lt;CreateBucketConfiguration&gt;\n  &lt;LocationConstraint&gt;eu-west-1&lt;/LocationConstraint&gt;\n&lt;/CreateBucketConfiguration&gt;\n</code></pre></p> <p>Response: <code>200 OK</code></p>"},{"location":"api/buckets/#deletebucket","title":"DeleteBucket","text":"<p>Deletes an empty bucket.</p> <p>Request: <pre><code>DELETE /my-bucket HTTP/1.1\nHost: s3.example.com\n</code></pre></p> <p>Response: <code>204 No Content</code></p> <p>Warning</p> <p>Bucket must be empty. Delete all objects first.</p>"},{"location":"api/buckets/#headbucket","title":"HeadBucket","text":"<p>Checks if a bucket exists and you have access.</p> <p>Request: <pre><code>HEAD /my-bucket HTTP/1.1\nHost: s3.example.com\n</code></pre></p> <p>Response: <code>200 OK</code> or <code>404 Not Found</code></p>"},{"location":"api/buckets/#getbucketlocation","title":"GetBucketLocation","text":"<p>Returns the region of a bucket.</p> <p>Request: <pre><code>GET /my-bucket?location HTTP/1.1\nHost: s3.example.com\n</code></pre></p> <p>Response: <pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;LocationConstraint&gt;us-east-1&lt;/LocationConstraint&gt;\n</code></pre></p>"},{"location":"api/buckets/#getbucketversioning","title":"GetBucketVersioning","text":"<p>Gets versioning state.</p> <p>Request: <pre><code>GET /my-bucket?versioning HTTP/1.1\n</code></pre></p> <p>Response: <pre><code>&lt;VersioningConfiguration&gt;\n  &lt;Status&gt;Enabled&lt;/Status&gt;\n&lt;/VersioningConfiguration&gt;\n</code></pre></p>"},{"location":"api/buckets/#putbucketversioning","title":"PutBucketVersioning","text":"<p>Enables or suspends versioning.</p> <p>Request: <pre><code>PUT /my-bucket?versioning HTTP/1.1\n\n&lt;VersioningConfiguration&gt;\n  &lt;Status&gt;Enabled&lt;/Status&gt;\n&lt;/VersioningConfiguration&gt;\n</code></pre></p>"},{"location":"api/buckets/#getbucketpolicy","title":"GetBucketPolicy","text":"<p>Gets bucket policy.</p> <p>Request: <pre><code>GET /my-bucket?policy HTTP/1.1\n</code></pre></p> <p>Response: JSON policy document</p>"},{"location":"api/buckets/#putbucketpolicy","title":"PutBucketPolicy","text":"<p>Sets bucket policy.</p> <p>Request: <pre><code>PUT /my-bucket?policy HTTP/1.1\nContent-Type: application/json\n\n{\"Version\": \"2012-10-17\", \"Statement\": [...]}\n</code></pre></p>"},{"location":"api/errors/","title":"Error Codes","text":"<p>All errors return XML responses:</p> <pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;Error&gt;\n  &lt;Code&gt;NoSuchBucket&lt;/Code&gt;\n  &lt;Message&gt;The specified bucket does not exist&lt;/Message&gt;\n  &lt;Resource&gt;/my-bucket&lt;/Resource&gt;\n  &lt;RequestId&gt;request-id&lt;/RequestId&gt;\n&lt;/Error&gt;\n</code></pre>"},{"location":"api/errors/#common-errors","title":"Common Errors","text":""},{"location":"api/errors/#client-errors-4xx","title":"Client Errors (4xx)","text":"Code HTTP Description <code>AccessDenied</code> 403 Access denied <code>BucketAlreadyExists</code> 409 Bucket name taken <code>BucketAlreadyOwnedByYou</code> 409 You own this bucket <code>BucketNotEmpty</code> 409 Bucket has objects <code>InvalidAccessKeyId</code> 403 Unknown access key <code>InvalidArgument</code> 400 Invalid parameter <code>InvalidBucketName</code> 400 Invalid bucket name <code>InvalidRange</code> 416 Invalid byte range <code>MalformedXML</code> 400 Bad XML <code>MissingContentLength</code> 411 Missing header <code>NoSuchBucket</code> 404 Bucket not found <code>NoSuchKey</code> 404 Object not found <code>NoSuchUpload</code> 404 Upload not found <code>SignatureDoesNotMatch</code> 403 Invalid signature"},{"location":"api/errors/#server-errors-5xx","title":"Server Errors (5xx)","text":"Code HTTP Description <code>InternalError</code> 500 Server error <code>ServiceUnavailable</code> 503 Temporarily unavailable"},{"location":"api/errors/#error-response-headers","title":"Error Response Headers","text":"Header Description <code>x-amz-request-id</code> Request identifier <code>x-amz-id-2</code> Extended request ID <code>Content-Type</code> <code>application/xml</code>"},{"location":"api/errors/#handling-errors","title":"Handling Errors","text":"PythonJavaScript <pre><code>from botocore.exceptions import ClientError\n\ntry:\n    s3.get_object(Bucket='bucket', Key='key')\nexcept ClientError as e:\n    error_code = e.response['Error']['Code']\n    if error_code == 'NoSuchKey':\n        print(\"Object not found\")\n</code></pre> <pre><code>try {\n  await client.send(new GetObjectCommand({...}));\n} catch (error) {\n  if (error.name === 'NoSuchKey') {\n    console.log('Object not found');\n  }\n}\n</code></pre>"},{"location":"api/objects/","title":"Object Operations","text":""},{"location":"api/objects/#putobject","title":"PutObject","text":"<p>Uploads an object.</p> <p>Request: <pre><code>PUT /my-bucket/my-key HTTP/1.1\nHost: s3.example.com\nContent-Type: application/octet-stream\nContent-Length: 1024\n\n[binary data]\n</code></pre></p> <p>Headers:</p> Header Description <code>Content-Type</code> MIME type <code>Content-MD5</code> Base64 MD5 for integrity <code>x-amz-storage-class</code> Storage class <code>x-amz-server-side-encryption</code> AES256 <code>x-amz-meta-*</code> Custom metadata <p>Response: <pre><code>HTTP/1.1 200 OK\nETag: \"d41d8cd98f00b204e9800998ecf8427e\"\nx-amz-version-id: version-id\n</code></pre></p>"},{"location":"api/objects/#getobject","title":"GetObject","text":"<p>Downloads an object.</p> <p>Request: <pre><code>GET /my-bucket/my-key HTTP/1.1\nHost: s3.example.com\n</code></pre></p> <p>Optional Headers:</p> Header Description <code>Range</code> Byte range <code>bytes=0-1023</code> <code>If-Match</code> ETag condition <code>If-None-Match</code> ETag condition <code>If-Modified-Since</code> Date condition <p>Query Parameters:</p> Parameter Description <code>versionId</code> Specific version <code>response-content-type</code> Override Content-Type <code>response-content-disposition</code> Override Content-Disposition"},{"location":"api/objects/#headobject","title":"HeadObject","text":"<p>Gets metadata without body.</p> <p>Request: <pre><code>HEAD /my-bucket/my-key HTTP/1.1\n</code></pre></p> <p>Response: Headers only, no body.</p>"},{"location":"api/objects/#deleteobject","title":"DeleteObject","text":"<p>Deletes an object.</p> <p>Request: <pre><code>DELETE /my-bucket/my-key HTTP/1.1\n</code></pre></p> <p>Response: <code>204 No Content</code></p>"},{"location":"api/objects/#copyobject","title":"CopyObject","text":"<p>Copies an object.</p> <p>Request: <pre><code>PUT /dest-bucket/dest-key HTTP/1.1\nx-amz-copy-source: /source-bucket/source-key\n</code></pre></p>"},{"location":"api/objects/#listobjectsv2","title":"ListObjectsV2","text":"<p>Lists objects in a bucket.</p> <p>Request: <pre><code>GET /my-bucket?list-type=2&amp;prefix=folder/&amp;max-keys=100 HTTP/1.1\n</code></pre></p> <p>Parameters:</p> Parameter Description <code>list-type</code> Must be <code>2</code> <code>prefix</code> Filter by prefix <code>delimiter</code> Grouping character <code>max-keys</code> Maximum results <code>continuation-token</code> Pagination <p>Response: <pre><code>&lt;ListBucketResult&gt;\n  &lt;n&gt;my-bucket&lt;/n&gt;\n  &lt;Contents&gt;\n    &lt;Key&gt;folder/file.txt&lt;/Key&gt;\n    &lt;Size&gt;1024&lt;/Size&gt;\n    &lt;LastModified&gt;2024-01-01T00:00:00.000Z&lt;/LastModified&gt;\n    &lt;ETag&gt;\"etag\"&lt;/ETag&gt;\n  &lt;/Contents&gt;\n&lt;/ListBucketResult&gt;\n</code></pre></p>"},{"location":"api/objects/#multipart-upload","title":"Multipart Upload","text":""},{"location":"api/objects/#createmultipartupload","title":"CreateMultipartUpload","text":"<pre><code>POST /my-bucket/large-file?uploads HTTP/1.1\n</code></pre>"},{"location":"api/objects/#uploadpart","title":"UploadPart","text":"<pre><code>PUT /my-bucket/large-file?uploadId=X&amp;partNumber=1 HTTP/1.1\n\n[5MB+ binary data]\n</code></pre>"},{"location":"api/objects/#completemultipartupload","title":"CompleteMultipartUpload","text":"<pre><code>POST /my-bucket/large-file?uploadId=X HTTP/1.1\n\n&lt;CompleteMultipartUpload&gt;\n  &lt;Part&gt;\n    &lt;PartNumber&gt;1&lt;/PartNumber&gt;\n    &lt;ETag&gt;\"part-etag\"&lt;/ETag&gt;\n  &lt;/Part&gt;\n&lt;/CompleteMultipartUpload&gt;\n</code></pre>"},{"location":"architecture/","title":"Architecture","text":"<ul> <li> <p> Components</p> <p>Crate structure and responsibilities.</p> <p> Components</p> </li> <li> <p> Security</p> <p>Security model and best practices.</p> <p> Security</p> </li> </ul>"},{"location":"architecture/#overview","title":"Overview","text":"<pre><code>graph TB\n    Client[Client] --&gt; LB[Load Balancer]\n    LB --&gt; H1[Hafiz Node 1]\n    LB --&gt; H2[Hafiz Node 2]\n    LB --&gt; H3[Hafiz Node 3]\n    H1 --&gt; PG[(PostgreSQL)]\n    H2 --&gt; PG\n    H3 --&gt; PG\n    H1 --&gt; D1[(Disk)]\n    H2 --&gt; D2[(Disk)]\n    H3 --&gt; D3[(Disk)]</code></pre>"},{"location":"architecture/#key-design-principles","title":"Key Design Principles","text":"<ol> <li>S3 Compatible - Works with existing tools</li> <li>Memory Safe - Written in Rust</li> <li>Scalable - Horizontal scaling</li> <li>Secure - Encryption at rest and in transit</li> <li>Observable - Prometheus metrics</li> </ol>"},{"location":"architecture/components/","title":"Components","text":""},{"location":"architecture/components/#crate-structure","title":"Crate Structure","text":"<pre><code>hafiz/\n\u251c\u2500\u2500 crates/\n\u2502   \u251c\u2500\u2500 hafiz-core/       # Core types\n\u2502   \u251c\u2500\u2500 hafiz-s3-api/     # S3 API\n\u2502   \u251c\u2500\u2500 hafiz-storage/    # Storage backends\n\u2502   \u251c\u2500\u2500 hafiz-metadata/   # Database layer\n\u2502   \u251c\u2500\u2500 hafiz-auth/       # Authentication\n\u2502   \u251c\u2500\u2500 hafiz-crypto/     # Encryption\n\u2502   \u251c\u2500\u2500 hafiz-cluster/    # Clustering\n\u2502   \u251c\u2500\u2500 hafiz-admin/      # Admin API\n\u2502   \u2514\u2500\u2500 hafiz-cli/        # CLI tool\n</code></pre>"},{"location":"architecture/components/#hafiz-core","title":"hafiz-core","text":"<p>Foundation crate with shared types:</p> <ul> <li><code>Bucket</code>, <code>Object</code>, <code>ObjectMetadata</code></li> <li><code>HafizError</code> - Error types</li> <li><code>Config</code> - Configuration</li> </ul>"},{"location":"architecture/components/#hafiz-s3-api","title":"hafiz-s3-api","text":"<p>HTTP layer using Axum:</p> <ul> <li>76+ S3 API endpoints</li> <li>XML parsing</li> <li>Middleware</li> </ul>"},{"location":"architecture/components/#hafiz-storage","title":"hafiz-storage","text":"<p>Storage abstraction:</p> <ul> <li><code>FilesystemStorage</code></li> <li><code>S3ProxyStorage</code></li> </ul>"},{"location":"architecture/components/#hafiz-metadata","title":"hafiz-metadata","text":"<p>Database layer using SQLx:</p> <ul> <li><code>SqliteRepository</code></li> <li><code>PostgresRepository</code></li> </ul>"},{"location":"architecture/components/#hafiz-auth","title":"hafiz-auth","text":"<p>Authentication:</p> <ul> <li>AWS Signature V4</li> <li>LDAP integration</li> <li>Policy evaluation</li> </ul>"},{"location":"architecture/components/#hafiz-crypto","title":"hafiz-crypto","text":"<p>Encryption:</p> <ul> <li>AES-256-GCM</li> <li>Key derivation</li> <li>Hashing</li> </ul>"},{"location":"architecture/security/","title":"Security Model","text":""},{"location":"architecture/security/#defense-in-depth","title":"Defense in Depth","text":"<pre><code>graph TD\n    A[Network - TLS] --&gt; B[Authentication - SigV4/LDAP]\n    B --&gt; C[Authorization - Policies]\n    C --&gt; D[Encryption - AES-256]\n    D --&gt; E[Audit - Logging]</code></pre>"},{"location":"architecture/security/#authentication","title":"Authentication","text":"<ul> <li>AWS Signature V4 - Request signing</li> <li>LDAP - Enterprise integration</li> </ul>"},{"location":"architecture/security/#authorization","title":"Authorization","text":"<ul> <li>Bucket Policies - IAM-style access control</li> <li>Conditions - IP, time, MFA</li> </ul>"},{"location":"architecture/security/#encryption","title":"Encryption","text":"<ul> <li>In Transit - TLS 1.2/1.3</li> <li>At Rest - AES-256-GCM</li> </ul>"},{"location":"architecture/security/#audit","title":"Audit","text":"<ul> <li>Access logging</li> <li>Request tracing</li> </ul>"},{"location":"architecture/security/#best-practices","title":"Best Practices","text":"<ol> <li>Enable TLS in production</li> <li>Use strong credentials</li> <li>Enable encryption</li> <li>Regular key rotation</li> <li>Monitor access logs</li> </ol>"},{"location":"cli/","title":"CLI Reference","text":"<p>The <code>hafiz</code> CLI provides an AWS CLI-compatible interface for Hafiz.</p>"},{"location":"cli/#installation","title":"Installation","text":"BinaryCargoHomebrew <pre><code>curl -LO https://github.com/shellnoq/hafiz/releases/latest/download/hafiz-cli-linux-amd64.tar.gz\ntar xzf hafiz-cli-linux-amd64.tar.gz\nsudo mv hafiz /usr/local/bin/\n</code></pre> <pre><code>cargo install hafiz-cli\n</code></pre> <pre><code>brew install shellnoq/tap/hafiz\n</code></pre>"},{"location":"cli/#configuration","title":"Configuration","text":"<pre><code>hafiz configure\n# Endpoint URL: http://localhost:9000\n# Access Key: hafizadmin\n# Secret Key: hafizadmin\n</code></pre> <p>Or use environment variables:</p> <pre><code>export HAFIZ_ENDPOINT=http://localhost:9000\nexport HAFIZ_ACCESS_KEY=hafizadmin\nexport HAFIZ_SECRET_KEY=hafizadmin\n</code></pre>"},{"location":"cli/#commands","title":"Commands","text":"Command Description <code>ls</code> List buckets or objects <code>cp</code> Copy files <code>mv</code> Move files <code>sync</code> Synchronize directories <code>rm</code> Remove objects <code>mb</code> Make bucket <code>rb</code> Remove bucket <code>head</code> Get object metadata <code>cat</code> Stream object content <code>du</code> Disk usage <code>presign</code> Generate presigned URL <code>configure</code> Manage configuration <p> Full Command Reference</p>"},{"location":"cli/#quick-examples","title":"Quick Examples","text":"<pre><code># List buckets\nhafiz ls s3://\n\n# Upload file\nhafiz cp file.txt s3://my-bucket/\n\n# Download file\nhafiz cp s3://my-bucket/file.txt ./\n\n# Sync directory\nhafiz sync ./local/ s3://my-bucket/backup/\n\n# Delete object\nhafiz rm s3://my-bucket/old-file.txt\n</code></pre>"},{"location":"cli/#global-options","title":"Global Options","text":"<pre><code>hafiz [OPTIONS] &lt;COMMAND&gt;\n\nOptions:\n  --endpoint &lt;URL&gt;       Endpoint URL\n  --access-key &lt;KEY&gt;     Access key\n  --secret-key &lt;KEY&gt;     Secret key\n  --profile &lt;n&gt;       Config profile\n  --output &lt;FORMAT&gt;      text or json\n  -v, --verbose          Verbose output\n  -q, --quiet            Quiet mode\n  -h, --help             Help\n</code></pre>"},{"location":"cli/commands/","title":"CLI Commands","text":""},{"location":"cli/commands/#ls-list","title":"ls - List","text":"<pre><code># List buckets\nhafiz ls s3://\n\n# List objects\nhafiz ls s3://my-bucket/\n\n# Long format\nhafiz ls -l s3://my-bucket/\n\n# Human-readable sizes\nhafiz ls -lH s3://my-bucket/\n\n# Recursive\nhafiz ls -r s3://my-bucket/\n</code></pre>"},{"location":"cli/commands/#cp-copy","title":"cp - Copy","text":"<pre><code># Upload\nhafiz cp file.txt s3://my-bucket/\n\n# Download\nhafiz cp s3://my-bucket/file.txt ./\n\n# Recursive\nhafiz cp -r ./data/ s3://my-bucket/data/\n\n# With patterns\nhafiz cp -r ./logs/ s3://my-bucket/ --include \"*.log\" --exclude \"*.tmp\"\n\n# Dry run\nhafiz cp -r ./data/ s3://my-bucket/ --dryrun\n</code></pre>"},{"location":"cli/commands/#sync-synchronize","title":"sync - Synchronize","text":"<pre><code># Upload sync\nhafiz sync ./local/ s3://my-bucket/\n\n# Download sync\nhafiz sync s3://my-bucket/ ./local/\n\n# Delete extra files\nhafiz sync ./local/ s3://my-bucket/ --delete\n\n# Dry run\nhafiz sync ./local/ s3://my-bucket/ --dryrun\n</code></pre>"},{"location":"cli/commands/#rm-remove","title":"rm - Remove","text":"<pre><code># Single file\nhafiz rm s3://my-bucket/file.txt\n\n# Recursive\nhafiz rm -r s3://my-bucket/old-data/\n\n# Force (no confirmation)\nhafiz rm -f s3://my-bucket/file.txt\n</code></pre>"},{"location":"cli/commands/#mbrb-bucket-operations","title":"mb/rb - Bucket Operations","text":"<pre><code># Create bucket\nhafiz mb s3://new-bucket\n\n# Delete bucket\nhafiz rb s3://empty-bucket\n\n# Force delete\nhafiz rb s3://bucket --force\n</code></pre>"},{"location":"cli/commands/#head-metadata","title":"head - Metadata","text":"<pre><code>hafiz head s3://my-bucket/file.txt\n\n# Output:\n#   Content-Type: text/plain\n#   Content-Length: 1024\n#   ETag: \"abc123\"\n</code></pre>"},{"location":"cli/commands/#cat-stream-content","title":"cat - Stream Content","text":"<pre><code># Print to stdout\nhafiz cat s3://my-bucket/file.txt\n\n# Pipe to command\nhafiz cat s3://my-bucket/data.json | jq .\n</code></pre>"},{"location":"cli/commands/#du-disk-usage","title":"du - Disk Usage","text":"<pre><code># Calculate usage\nhafiz du s3://my-bucket/\n\n# Human-readable\nhafiz du -H s3://my-bucket/\n</code></pre>"},{"location":"cli/commands/#presign-presigned-url","title":"presign - Presigned URL","text":"<pre><code># Generate URL (1 hour)\nhafiz presign s3://my-bucket/file.txt\n\n# Custom expiration\nhafiz presign s3://my-bucket/file.txt --expires 86400\n</code></pre>"},{"location":"cli/commands/#configure-configuration","title":"configure - Configuration","text":"<pre><code># Interactive setup\nhafiz configure\n\n# Set value\nhafiz configure set endpoint http://localhost:9000\n\n# Get value\nhafiz configure get endpoint\n\n# List all\nhafiz configure list\n</code></pre>"},{"location":"deployment/","title":"Deployment","text":"<p>Choose the deployment method that fits your needs.</p> <ul> <li> <p> Docker</p> <p>Quickest way to get started.</p> <p> Docker Guide</p> </li> <li> <p> Kubernetes</p> <p>Production-ready with Helm.</p> <p> Kubernetes Guide</p> </li> <li> <p> Production</p> <p>Best practices for production.</p> <p> Production Guide</p> </li> </ul>"},{"location":"deployment/#quick-comparison","title":"Quick Comparison","text":"Method Use Case Complexity Docker Development \u2b50 Easy Docker Compose Testing \u2b50\u2b50 Medium Kubernetes Production \u2b50\u2b50\u2b50 Advanced Binary Bare metal \u2b50\u2b50 Medium"},{"location":"deployment/#minimum-requirements","title":"Minimum Requirements","text":"Resource Development Production CPU 1 core 4+ cores Memory 512 MB 4+ GB Disk 1 GB 100+ GB Network - 1 Gbps+"},{"location":"deployment/#quick-start","title":"Quick Start","text":"<pre><code>docker run -d \\\n  --name hafiz \\\n  -p 9000:9000 \\\n  -p 9001:9001 \\\n  -e HAFIZ_ROOT_ACCESS_KEY=hafizadmin \\\n  -e HAFIZ_ROOT_SECRET_KEY=hafizadmin \\\n  ghcr.io/shellnoq/hafiz:latest\n</code></pre> <p>Access:</p> <ul> <li>S3 API: http://localhost:9000</li> <li>Admin UI: http://localhost:9001</li> </ul>"},{"location":"deployment/docker/","title":"Docker Deployment","text":""},{"location":"deployment/docker/#single-container","title":"Single Container","text":"<pre><code>docker run -d \\\n  --name hafiz \\\n  -p 9000:9000 \\\n  -p 9001:9001 \\\n  -v hafiz-data:/data \\\n  -e HAFIZ_ROOT_ACCESS_KEY=hafizadmin \\\n  -e HAFIZ_ROOT_SECRET_KEY=hafizadmin \\\n  ghcr.io/shellnoq/hafiz:latest\n</code></pre>"},{"location":"deployment/docker/#docker-compose","title":"Docker Compose","text":""},{"location":"deployment/docker/#basic-setup","title":"Basic Setup","text":"<pre><code>version: '3.8'\nservices:\n  hafiz:\n    image: ghcr.io/shellnoq/hafiz:latest\n    ports:\n      - \"9000:9000\"\n      - \"9001:9001\"\n    volumes:\n      - hafiz-data:/data\n    environment:\n      - HAFIZ_ROOT_ACCESS_KEY=hafizadmin\n      - HAFIZ_ROOT_SECRET_KEY=hafizadmin\n\nvolumes:\n  hafiz-data:\n</code></pre>"},{"location":"deployment/docker/#with-postgresql","title":"With PostgreSQL","text":"<pre><code>version: '3.8'\nservices:\n  hafiz:\n    image: ghcr.io/shellnoq/hafiz:latest\n    ports:\n      - \"9000:9000\"\n      - \"9001:9001\"\n    volumes:\n      - hafiz-data:/data\n    environment:\n      - HAFIZ_ROOT_ACCESS_KEY=hafizadmin\n      - HAFIZ_ROOT_SECRET_KEY=hafizadmin\n      - HAFIZ_DATABASE_URL=postgres://hafiz:secret@postgres/hafiz\n    depends_on:\n      - postgres\n\n  postgres:\n    image: postgres:15\n    volumes:\n      - postgres-data:/var/lib/postgresql/data\n    environment:\n      - POSTGRES_USER=hafiz\n      - POSTGRES_PASSWORD=secret\n      - POSTGRES_DB=hafiz\n\nvolumes:\n  hafiz-data:\n  postgres-data:\n</code></pre>"},{"location":"deployment/docker/#environment-variables","title":"Environment Variables","text":"Variable Required Description <code>HAFIZ_ROOT_ACCESS_KEY</code> Yes Root access key <code>HAFIZ_ROOT_SECRET_KEY</code> Yes Root secret key <code>HAFIZ_S3_PORT</code> No S3 port (9000) <code>HAFIZ_ADMIN_PORT</code> No Admin port (9001) <code>HAFIZ_DATABASE_URL</code> No PostgreSQL URL"},{"location":"deployment/docker/#verify-installation","title":"Verify Installation","text":"<pre><code># Check health\ncurl http://localhost:9000/health\n\n# Test S3 API\naws --endpoint-url http://localhost:9000 s3 ls\n</code></pre>"},{"location":"deployment/kubernetes/","title":"Kubernetes Deployment","text":""},{"location":"deployment/kubernetes/#prerequisites","title":"Prerequisites","text":"<ul> <li>Kubernetes 1.23+</li> <li>Helm 3.8+</li> <li>kubectl configured</li> </ul>"},{"location":"deployment/kubernetes/#installation","title":"Installation","text":""},{"location":"deployment/kubernetes/#add-helm-repository","title":"Add Helm Repository","text":"<pre><code>helm repo add hafiz https://shellnoq.github.io/hafiz\nhelm repo update\n</code></pre>"},{"location":"deployment/kubernetes/#create-namespace","title":"Create Namespace","text":"<pre><code>kubectl create namespace hafiz\n</code></pre>"},{"location":"deployment/kubernetes/#create-secrets","title":"Create Secrets","text":"<pre><code># Generate credentials\nkubectl create secret generic hafiz-credentials \\\n  --namespace hafiz \\\n  --from-literal=access-key=$(openssl rand -hex 10) \\\n  --from-literal=secret-key=$(openssl rand -hex 20)\n\n# Encryption key\nkubectl create secret generic hafiz-encryption \\\n  --namespace hafiz \\\n  --from-literal=master-key=$(openssl rand -base64 32)\n</code></pre>"},{"location":"deployment/kubernetes/#install","title":"Install","text":"<pre><code>helm install hafiz hafiz/hafiz \\\n  --namespace hafiz \\\n  --set replicaCount=3 \\\n  --set hafiz.auth.existingSecret=hafiz-credentials\n</code></pre>"},{"location":"deployment/kubernetes/#configuration","title":"Configuration","text":""},{"location":"deployment/kubernetes/#valuesyaml","title":"values.yaml","text":"<pre><code>replicaCount: 3\n\nimage:\n  repository: ghcr.io/shellnoq/hafiz\n  tag: latest\n\nresources:\n  requests:\n    cpu: 500m\n    memory: 1Gi\n  limits:\n    cpu: 2000m\n    memory: 4Gi\n\npersistence:\n  enabled: true\n  size: 100Gi\n\ningress:\n  enabled: true\n  hosts:\n    - host: s3.example.com\n      paths:\n        - path: /\n          pathType: Prefix\n</code></pre>"},{"location":"deployment/kubernetes/#install-with-values","title":"Install with Values","text":"<pre><code>helm install hafiz hafiz/hafiz \\\n  --namespace hafiz \\\n  -f values.yaml\n</code></pre>"},{"location":"deployment/kubernetes/#verify","title":"Verify","text":"<pre><code># Check pods\nkubectl get pods -n hafiz\n\n# Check services\nkubectl get svc -n hafiz\n\n# Port forward\nkubectl port-forward svc/hafiz 9000:9000 -n hafiz\n\n# Test\naws --endpoint-url http://localhost:9000 s3 ls\n</code></pre>"},{"location":"deployment/kubernetes/#upgrade","title":"Upgrade","text":"<pre><code>helm upgrade hafiz hafiz/hafiz \\\n  --namespace hafiz \\\n  -f values.yaml\n</code></pre>"},{"location":"deployment/kubernetes/#uninstall","title":"Uninstall","text":"<pre><code>helm uninstall hafiz --namespace hafiz\nkubectl delete pvc -l app.kubernetes.io/name=hafiz -n hafiz\n</code></pre>"},{"location":"deployment/production/","title":"Production Deployment","text":""},{"location":"deployment/production/#checklist","title":"Checklist","text":"<ul> <li> TLS enabled</li> <li> Encryption enabled</li> <li> Strong credentials</li> <li> PostgreSQL backend</li> <li> Resource limits set</li> <li> Monitoring enabled</li> <li> Backup configured</li> <li> Network policies</li> </ul>"},{"location":"deployment/production/#security","title":"Security","text":""},{"location":"deployment/production/#tls","title":"TLS","text":"<pre><code>HAFIZ_TLS_ENABLED=true\nHAFIZ_TLS_CERT_PATH=/etc/hafiz/tls.crt\nHAFIZ_TLS_KEY_PATH=/etc/hafiz/tls.key\n</code></pre>"},{"location":"deployment/production/#encryption","title":"Encryption","text":"<pre><code>HAFIZ_ENCRYPTION_ENABLED=true\nHAFIZ_ENCRYPTION_MASTER_KEY=$(openssl rand -base64 32)\n</code></pre>"},{"location":"deployment/production/#credentials","title":"Credentials","text":"<pre><code># Generate strong credentials\nHAFIZ_ROOT_ACCESS_KEY=$(openssl rand -hex 16)\nHAFIZ_ROOT_SECRET_KEY=$(openssl rand -hex 32)\n</code></pre>"},{"location":"deployment/production/#high-availability","title":"High Availability","text":""},{"location":"deployment/production/#multiple-replicas","title":"Multiple Replicas","text":"<pre><code>replicaCount: 5\n\naffinity:\n  podAntiAffinity:\n    requiredDuringSchedulingIgnoredDuringExecution:\n      - labelSelector:\n          matchLabels:\n            app: hafiz\n        topologyKey: kubernetes.io/hostname\n</code></pre>"},{"location":"deployment/production/#pod-disruption-budget","title":"Pod Disruption Budget","text":"<pre><code>podDisruptionBudget:\n  enabled: true\n  minAvailable: 3\n</code></pre>"},{"location":"deployment/production/#monitoring","title":"Monitoring","text":"<p>Enable Prometheus metrics:</p> <pre><code>metrics:\n  enabled: true\n  serviceMonitor:\n    enabled: true\n</code></pre>"},{"location":"deployment/production/#backup","title":"Backup","text":""},{"location":"deployment/production/#metadata","title":"Metadata","text":"<pre><code>pg_dump -h postgres -U hafiz hafiz &gt; backup.sql\n</code></pre>"},{"location":"deployment/production/#data","title":"Data","text":"<pre><code># Use cloud provider snapshots\n# Or replicate to another Hafiz cluster\n</code></pre>"},{"location":"development/","title":"Development","text":"<ul> <li> <p> Contributing</p> <p>How to contribute to Hafiz.</p> <p> Contributing</p> </li> <li> <p> Roadmap</p> <p>Future plans and features.</p> <p> Roadmap</p> </li> <li> <p> Changelog</p> <p>Version history.</p> <p> Changelog</p> </li> </ul>"},{"location":"development/#quick-setup","title":"Quick Setup","text":"<pre><code># Clone\ngit clone https://github.com/shellnoq/hafiz.git\ncd hafiz\n\n# Build\ncargo build\n\n# Test\ncargo test\n\n# Run\ncargo run --bin hafiz-server\n</code></pre>"},{"location":"development/#requirements","title":"Requirements","text":"<ul> <li>Rust 1.75+</li> <li>PostgreSQL 13+ (optional)</li> <li>Docker (optional)</li> </ul>"},{"location":"development/changelog/","title":"Changelog","text":""},{"location":"development/changelog/#010-2024-12-08","title":"0.1.0 - 2024-12-08","text":""},{"location":"development/changelog/#added","title":"Added","text":"<ul> <li>Full S3 API compatibility (76+ endpoints)</li> <li>Multi-part uploads</li> <li>Object versioning</li> <li>Lifecycle policies</li> <li>Server-side encryption (AES-256-GCM)</li> <li>Object Lock (WORM)</li> <li>Bucket policies</li> <li>LDAP integration</li> <li>Admin API &amp; UI</li> <li>Prometheus metrics</li> <li>Event notifications</li> <li>Cluster mode</li> <li>Helm chart</li> <li>CLI tool</li> </ul>"},{"location":"development/changelog/#technical","title":"Technical","text":"<ul> <li>33,000+ lines of Rust</li> <li>9 crates</li> <li>PostgreSQL &amp; SQLite support</li> </ul>"},{"location":"development/contributing/","title":"Contributing","text":""},{"location":"development/contributing/#getting-started","title":"Getting Started","text":"<pre><code># Clone\ngit clone https://github.com/shellnoq/hafiz.git\ncd hafiz\n\n# Build\ncargo build\n\n# Test\ncargo test\n\n# Format\ncargo fmt\n\n# Lint\ncargo clippy\n</code></pre>"},{"location":"development/contributing/#pull-request-process","title":"Pull Request Process","text":"<ol> <li>Fork the repository</li> <li>Create a branch: <code>git checkout -b feature/my-feature</code></li> <li>Make changes with tests</li> <li>Run <code>cargo fmt &amp;&amp; cargo clippy &amp;&amp; cargo test</code></li> <li>Commit using conventional commits</li> <li>Push and create PR</li> </ol>"},{"location":"development/contributing/#commit-messages","title":"Commit Messages","text":"<pre><code>feat: add bucket tagging\nfix: handle empty prefix\ndocs: update API reference\ntest: add versioning tests\n</code></pre>"},{"location":"development/contributing/#code-style","title":"Code Style","text":"<ul> <li>Run <code>cargo fmt</code> before committing</li> <li>No clippy warnings</li> <li>Add tests for new features</li> <li>Document public APIs</li> </ul>"},{"location":"development/contributing/#getting-help","title":"Getting Help","text":"<ul> <li>GitHub Issues</li> <li>Discussions</li> </ul>"},{"location":"development/roadmap/","title":"Roadmap","text":""},{"location":"development/roadmap/#v01x-current","title":"v0.1.x (Current)","text":"<ul> <li> Core S3 API</li> <li> Versioning</li> <li> Encryption</li> <li> Object Lock</li> <li> Helm Chart</li> <li> CLI Tool</li> <li> CI/CD Pipeline</li> <li> Integration Tests</li> </ul>"},{"location":"development/roadmap/#v020-q1-2025","title":"v0.2.0 (Q1 2025)","text":"<ul> <li> S3 Select</li> <li> Cross-region replication</li> <li> Web UI improvements</li> </ul>"},{"location":"development/roadmap/#v030-q2-2025","title":"v0.3.0 (Q2 2025)","text":"<ul> <li> Erasure coding</li> <li> Tiered storage</li> <li> Terraform provider</li> </ul>"},{"location":"development/roadmap/#v100-q3-2025","title":"v1.0.0 (Q3 2025)","text":"<ul> <li> Production-ready release</li> <li> Long-term support</li> <li> Enterprise features</li> </ul>"},{"location":"development/roadmap/#feature-requests","title":"Feature Requests","text":"<p>Open a Discussion to propose new features.</p>"},{"location":"getting-started/","title":"Getting Started","text":"<p>Welcome to Hafiz! This section will help you get up and running quickly.</p>"},{"location":"getting-started/#overview","title":"Overview","text":"<p>Hafiz is an S3-compatible object storage system. You can use it with:</p> <ul> <li>AWS CLI - Command-line interface</li> <li>AWS SDKs - Python, JavaScript, Go, Java, etc.</li> <li>Hafiz CLI - Our own CLI tool</li> <li>S3 Browser - GUI applications</li> </ul>"},{"location":"getting-started/#installation-options","title":"Installation Options","text":"<p>Choose your preferred installation method:</p> <ul> <li> <p> Docker</p> <p>Fastest way to get started. Single command deployment.</p> <p> Docker Guide</p> </li> <li> <p> Kubernetes</p> <p>Production-ready Helm chart with HA support.</p> <p> Kubernetes Guide</p> </li> <li> <p> Binary</p> <p>Download pre-built binaries for your platform.</p> <p> Binary Installation</p> </li> <li> <p> From Source</p> <p>Build from source with Rust.</p> <p> Build Guide</p> </li> </ul>"},{"location":"getting-started/#next-steps","title":"Next Steps","text":"<ol> <li>System Requirements - Check hardware &amp; software requirements</li> <li>Quick Start - Get running in 5 minutes</li> <li>Configuration - Customize your setup</li> <li>CLI Guide - Learn the command-line tools</li> </ol>"},{"location":"getting-started/configuration/","title":"Configuration","text":"<p>Hafiz can be configured via environment variables or configuration file.</p>"},{"location":"getting-started/configuration/#environment-variables","title":"Environment Variables","text":""},{"location":"getting-started/configuration/#required","title":"Required","text":"<pre><code>HAFIZ_ROOT_ACCESS_KEY=your-access-key\nHAFIZ_ROOT_SECRET_KEY=your-secret-key\n</code></pre>"},{"location":"getting-started/configuration/#server","title":"Server","text":"<pre><code>HAFIZ_S3_PORT=9000\nHAFIZ_ADMIN_PORT=9001\nHAFIZ_REGION=us-east-1\nHAFIZ_LOG_LEVEL=info  # trace, debug, info, warn, error\n</code></pre>"},{"location":"getting-started/configuration/#storage","title":"Storage","text":"<pre><code>HAFIZ_STORAGE_TYPE=filesystem\nHAFIZ_STORAGE_BASE_PATH=/data\n</code></pre>"},{"location":"getting-started/configuration/#database","title":"Database","text":"<pre><code># PostgreSQL (production)\nHAFIZ_DATABASE_URL=postgres://user:pass@host/hafiz\n\n# SQLite (development)\nHAFIZ_METADATA_TYPE=sqlite\nHAFIZ_SQLITE_PATH=/data/metadata.db\n</code></pre>"},{"location":"getting-started/configuration/#encryption","title":"Encryption","text":"<pre><code>HAFIZ_ENCRYPTION_ENABLED=true\nHAFIZ_ENCRYPTION_MASTER_KEY=$(openssl rand -base64 32)\n</code></pre>"},{"location":"getting-started/configuration/#cluster","title":"Cluster","text":"<pre><code>HAFIZ_CLUSTER_ENABLED=true\nHAFIZ_CLUSTER_PEERS=node2:7946,node3:7946\n</code></pre>"},{"location":"getting-started/configuration/#configuration-file","title":"Configuration File","text":"<p>Location: <code>/etc/hafiz/config.toml</code></p> <pre><code>[server]\ns3_port = 9000\nadmin_port = 9001\nregion = \"us-east-1\"\n\n[storage]\ntype = \"filesystem\"\nbase_path = \"/data\"\n\n[metadata]\ntype = \"postgresql\"\ndatabase_url = \"postgres://hafiz:secret@localhost/hafiz\"\n\n[encryption]\nenabled = true\n\n[cluster]\nenabled = true\npeers = [\"node2:7946\", \"node3:7946\"]\n</code></pre>"},{"location":"getting-started/configuration/#all-options","title":"All Options","text":"Variable Default Description <code>HAFIZ_ROOT_ACCESS_KEY</code> - Root access key (required) <code>HAFIZ_ROOT_SECRET_KEY</code> - Root secret key (required) <code>HAFIZ_S3_PORT</code> 9000 S3 API port <code>HAFIZ_ADMIN_PORT</code> 9001 Admin API port <code>HAFIZ_REGION</code> us-east-1 Default region <code>HAFIZ_LOG_LEVEL</code> info Log level <code>HAFIZ_STORAGE_BASE_PATH</code> /data Data directory <code>HAFIZ_DATABASE_URL</code> - PostgreSQL connection <code>HAFIZ_ENCRYPTION_ENABLED</code> false Enable encryption <code>HAFIZ_CLUSTER_ENABLED</code> false Enable clustering"},{"location":"getting-started/installation/","title":"Installation","text":""},{"location":"getting-started/installation/#docker","title":"Docker","text":"<pre><code>docker pull ghcr.io/shellnoq/hafiz:latest\n</code></pre>"},{"location":"getting-started/installation/#binary-downloads","title":"Binary Downloads","text":"<p>Download from GitHub Releases:</p> Platform Download Linux (amd64) <code>hafiz-linux-amd64.tar.gz</code> Linux (arm64) <code>hafiz-linux-arm64.tar.gz</code> macOS (amd64) <code>hafiz-darwin-amd64.tar.gz</code> macOS (arm64) <code>hafiz-darwin-arm64.tar.gz</code> Windows <code>hafiz-windows-amd64.zip</code> <pre><code># Linux/macOS\ncurl -LO https://github.com/shellnoq/hafiz/releases/latest/download/hafiz-linux-amd64.tar.gz\ntar xzf hafiz-linux-amd64.tar.gz\nsudo mv hafiz-server /usr/local/bin/\n</code></pre>"},{"location":"getting-started/installation/#from-source","title":"From Source","text":""},{"location":"getting-started/installation/#prerequisites","title":"Prerequisites","text":"<ul> <li>Rust 1.75+</li> <li>PostgreSQL 13+ (optional)</li> </ul>"},{"location":"getting-started/installation/#build","title":"Build","text":"<pre><code>git clone https://github.com/shellnoq/hafiz.git\ncd hafiz\ncargo build --release\n</code></pre>"},{"location":"getting-started/installation/#install","title":"Install","text":"<pre><code>sudo cp target/release/hafiz-server /usr/local/bin/\nsudo cp target/release/hafiz /usr/local/bin/\n</code></pre>"},{"location":"getting-started/installation/#verify","title":"Verify","text":"<pre><code>hafiz-server --version\n</code></pre>"},{"location":"getting-started/quickstart/","title":"Quick Start","text":"<p>Get Hafiz running in under 5 minutes.</p>"},{"location":"getting-started/quickstart/#prerequisites","title":"Prerequisites","text":"<ul> <li>Docker (recommended) or</li> <li>Rust 1.75+ (for building from source)</li> </ul>"},{"location":"getting-started/quickstart/#docker","title":"Docker","text":"<p>The fastest way to get started:</p> <pre><code>docker run -d \\\n  --name hafiz \\\n  -p 9000:9000 \\\n  -p 9001:9001 \\\n  -v hafiz-data:/data \\\n  -e HAFIZ_ROOT_ACCESS_KEY=hafizadmin \\\n  -e HAFIZ_ROOT_SECRET_KEY=hafizadmin \\\n  ghcr.io/shellnoq/hafiz:latest\n</code></pre> <p>That's it! Hafiz is now running:</p> <ul> <li>S3 API: http://localhost:9000</li> <li>Admin UI: http://localhost:9001</li> </ul>"},{"location":"getting-started/quickstart/#verify-installation","title":"Verify Installation","text":""},{"location":"getting-started/quickstart/#using-aws-cli","title":"Using AWS CLI","text":"<pre><code># Configure\naws configure set aws_access_key_id hafizadmin\naws configure set aws_secret_access_key hafizadmin\n\n# Create bucket\naws --endpoint-url http://localhost:9000 s3 mb s3://my-bucket\n\n# Upload file\necho \"Hello, Hafiz!\" &gt; test.txt\naws --endpoint-url http://localhost:9000 s3 cp test.txt s3://my-bucket/\n\n# List objects\naws --endpoint-url http://localhost:9000 s3 ls s3://my-bucket/\n</code></pre>"},{"location":"getting-started/quickstart/#using-python","title":"Using Python","text":"<pre><code>import boto3\n\ns3 = boto3.client(\n    's3',\n    endpoint_url='http://localhost:9000',\n    aws_access_key_id='hafizadmin',\n    aws_secret_access_key='hafizadmin'\n)\n\n# Create bucket\ns3.create_bucket(Bucket='my-bucket')\n\n# Upload\ns3.put_object(Bucket='my-bucket', Key='hello.txt', Body=b'Hello!')\n\n# Download\nresponse = s3.get_object(Bucket='my-bucket', Key='hello.txt')\nprint(response['Body'].read())\n</code></pre>"},{"location":"getting-started/quickstart/#using-hafiz-cli","title":"Using Hafiz CLI","text":"<pre><code># Install\ncargo install hafiz-cli\n\n# Configure\nhafiz configure\n# Endpoint: http://localhost:9000\n# Access Key: hafizadmin\n# Secret Key: hafizadmin\n\n# Use\nhafiz ls s3://\nhafiz mb s3://my-bucket\nhafiz cp file.txt s3://my-bucket/\n</code></pre>"},{"location":"getting-started/quickstart/#docker-compose","title":"Docker Compose","text":"<p>For a more complete setup with PostgreSQL:</p> docker-compose.yml<pre><code>version: '3.8'\nservices:\n  hafiz:\n    image: ghcr.io/shellnoq/hafiz:latest\n    ports:\n      - \"9000:9000\"\n      - \"9001:9001\"\n    environment:\n      - HAFIZ_ROOT_ACCESS_KEY=hafizadmin\n      - HAFIZ_ROOT_SECRET_KEY=hafizadmin\n      - HAFIZ_DATABASE_URL=postgres://hafiz:hafiz@postgres/hafiz\n    volumes:\n      - hafiz-data:/data\n    depends_on:\n      - postgres\n\n  postgres:\n    image: postgres:15\n    environment:\n      - POSTGRES_USER=hafiz\n      - POSTGRES_PASSWORD=hafiz\n      - POSTGRES_DB=hafiz\n    volumes:\n      - postgres-data:/var/lib/postgresql/data\n\nvolumes:\n  hafiz-data:\n  postgres-data:\n</code></pre> <pre><code>docker-compose up -d\n</code></pre>"},{"location":"getting-started/quickstart/#next-steps","title":"Next Steps","text":"<ul> <li>Configuration - Customize your deployment</li> <li>User Guide - Learn about buckets and objects</li> <li>Encryption - Enable server-side encryption</li> <li>Access Control - Configure permissions</li> </ul>"},{"location":"getting-started/requirements/","title":"System Requirements","text":""},{"location":"getting-started/requirements/#supported-operating-systems","title":"Supported Operating Systems","text":"OS Version Support Level Notes Ubuntu 22.04 LTS, 24.04 LTS \u2705 Recommended Best tested, production ready Debian 11, 12 \u2705 Full Stable, enterprise ready RHEL/Rocky/Alma 8, 9 \u2705 Full Enterprise Linux Amazon Linux 2, 2023 \u2705 Full AWS optimized macOS 13+ (Ventura) \u26a0\ufe0f Development Not for production Windows Server 2019+ \u26a0\ufe0f Experimental Docker recommended <p>Recommended OS</p> <p>Ubuntu 24.04 LTS is the recommended operating system for production deployments. It offers the best balance of stability, security updates, and community support.</p>"},{"location":"getting-started/requirements/#hardware-requirements","title":"Hardware Requirements","text":""},{"location":"getting-started/requirements/#minimum-developmenttesting","title":"Minimum (Development/Testing)","text":"Resource Requirement CPU 1 core (x86_64 or ARM64) Memory 512 MB RAM Disk 1 GB free space Network Any"},{"location":"getting-started/requirements/#recommended-production","title":"Recommended (Production)","text":"Resource Small Medium Large CPU 4 cores 8 cores 16+ cores Memory 4 GB 16 GB 64+ GB Disk 100 GB SSD 1 TB NVMe 10+ TB NVMe Network 1 Gbps 10 Gbps 25+ Gbps Nodes 1 3 5+"},{"location":"getting-started/requirements/#storage-recommendations","title":"Storage Recommendations","text":"Workload Disk Type RAID Notes Development Any - Local disk fine Production NVMe SSD RAID 10 Best performance Archive HDD RAID 6 Cost effective Cloud Cloud SSD - EBS gp3, Persistent Disk <p>Avoid</p> <ul> <li>Network filesystems (NFS, CIFS) for data storage</li> <li>Shared storage without proper locking</li> <li>Spinning disks for metadata (use SSD)</li> </ul>"},{"location":"getting-started/requirements/#software-dependencies","title":"Software Dependencies","text":""},{"location":"getting-started/requirements/#runtime","title":"Runtime","text":"Dependency Version Required Notes Linux Kernel 5.4+ Yes For io_uring support glibc 2.31+ Yes Standard C library OpenSSL 1.1.1+ / 3.x Yes TLS support"},{"location":"getting-started/requirements/#optional","title":"Optional","text":"Dependency Version For PostgreSQL 13+ Production metadata Docker 20.10+ Container deployment Kubernetes 1.23+ Orchestration"},{"location":"getting-started/requirements/#build-from-source","title":"Build from Source","text":"Dependency Version Notes Rust 1.75+ <code>rustup</code> recommended Cargo 1.75+ Comes with Rust GCC/Clang 11+ C compiler pkg-config Any Build tool OpenSSL dev 1.1.1+ <code>libssl-dev</code>"},{"location":"getting-started/requirements/#network-requirements","title":"Network Requirements","text":""},{"location":"getting-started/requirements/#ports","title":"Ports","text":"Port Protocol Service Required 9000 TCP S3 API Yes 9001 TCP Admin API/UI Optional 9090 TCP Metrics Optional 7946 TCP/UDP Cluster gossip Cluster only"},{"location":"getting-started/requirements/#firewall-rules","title":"Firewall Rules","text":"<pre><code># S3 API (required)\nufw allow 9000/tcp\n\n# Admin UI (optional)\nufw allow 9001/tcp\n\n# Metrics (optional)\nufw allow 9090/tcp\n\n# Cluster communication (if clustering)\nufw allow 7946/tcp\nufw allow 7946/udp\n</code></pre>"},{"location":"getting-started/requirements/#dns","title":"DNS","text":"<ul> <li>Forward and reverse DNS recommended</li> <li>Static IP or stable DHCP lease for production</li> </ul>"},{"location":"getting-started/requirements/#filesystem-requirements","title":"Filesystem Requirements","text":"Path Purpose Recommended Size Permissions <code>/data</code> Object storage 90% of total <code>hafiz:hafiz</code> (750) <code>/var/lib/hafiz</code> Metadata (SQLite) 10 GB <code>hafiz:hafiz</code> (750) <code>/var/log/hafiz</code> Logs 10 GB <code>hafiz:hafiz</code> (750) <code>/etc/hafiz</code> Configuration 1 MB <code>root:hafiz</code> (640)"},{"location":"getting-started/requirements/#filesystem-recommendations","title":"Filesystem Recommendations","text":"Filesystem Support Notes XFS \u2705 Recommended Best for large files ext4 \u2705 Full Good general purpose ZFS \u2705 Full Advanced features Btrfs \u26a0\ufe0f Experimental Use with caution"},{"location":"getting-started/requirements/#memory-considerations","title":"Memory Considerations","text":"<p>Hafiz memory usage scales with:</p> <ul> <li>Concurrent connections - ~1 MB per connection</li> <li>Multipart uploads - ~5 MB per active upload</li> <li>Metadata cache - Configurable, default 256 MB</li> <li>Encryption buffers - ~64 KB per encrypted operation</li> </ul>"},{"location":"getting-started/requirements/#tuning","title":"Tuning","text":"<pre><code># Recommended sysctl settings\nvm.swappiness=10\nvm.dirty_ratio=40\nvm.dirty_background_ratio=10\nnet.core.somaxconn=65535\nnet.ipv4.tcp_max_syn_backlog=65535\n</code></pre>"},{"location":"getting-started/requirements/#cloud-provider-recommendations","title":"Cloud Provider Recommendations","text":""},{"location":"getting-started/requirements/#aws","title":"AWS","text":"Component Recommended Instance m6i.xlarge (4 vCPU, 16 GB) Storage gp3 (3000 IOPS, 125 MB/s) Network Enhanced networking"},{"location":"getting-started/requirements/#gcp","title":"GCP","text":"Component Recommended Instance e2-standard-4 Storage pd-ssd Network Premium tier"},{"location":"getting-started/requirements/#azure","title":"Azure","text":"Component Recommended Instance Standard_D4s_v5 Storage Premium SSD Network Accelerated networking"},{"location":"getting-started/requirements/#quick-compatibility-check","title":"Quick Compatibility Check","text":"<p>Run this script to verify your system:</p> <pre><code>#!/bin/bash\necho \"=== Hafiz System Check ===\"\n\n# OS\necho -n \"OS: \"\ncat /etc/os-release | grep PRETTY_NAME | cut -d'\"' -f2\n\n# Kernel\necho -n \"Kernel: \"\nuname -r\n\n# CPU\necho -n \"CPU Cores: \"\nnproc\n\n# Memory\necho -n \"Memory: \"\nfree -h | awk '/^Mem:/ {print $2}'\n\n# Disk\necho -n \"Disk Free: \"\ndf -h / | awk 'NR==2 {print $4}'\n\n# Rust (if building from source)\nif command -v rustc &amp;&gt; /dev/null; then\n    echo -n \"Rust: \"\n    rustc --version\nfi\n\n# Docker (if using containers)\nif command -v docker &amp;&gt; /dev/null; then\n    echo -n \"Docker: \"\n    docker --version\nfi\n\necho \"=========================\"\n</code></pre>"},{"location":"getting-started/requirements/#next-steps","title":"Next Steps","text":"<p>Once your system meets the requirements:</p> <ul> <li>Quick Start - Get Hafiz running in 5 minutes</li> <li>Installation - Detailed installation guide</li> <li>Configuration - Configure for your environment</li> </ul>"},{"location":"operations/","title":"Operations","text":"<ul> <li> <p> Monitoring</p> <p>Prometheus metrics and Grafana dashboards.</p> <p> Monitoring</p> </li> <li> <p> Backup</p> <p>Backup and restore procedures.</p> <p> Backup</p> </li> <li> <p> Troubleshooting</p> <p>Common issues and solutions.</p> <p> Troubleshooting</p> </li> </ul>"},{"location":"operations/backup/","title":"Backup &amp; Restore","text":""},{"location":"operations/backup/#what-to-backup","title":"What to Backup","text":"<ol> <li>Metadata - PostgreSQL database</li> <li>Data - Object storage files</li> <li>Configuration - Settings and secrets</li> </ol>"},{"location":"operations/backup/#metadata-backup","title":"Metadata Backup","text":""},{"location":"operations/backup/#postgresql","title":"PostgreSQL","text":"<pre><code># Backup\npg_dump -h localhost -U hafiz hafiz &gt; hafiz-backup-$(date +%Y%m%d).sql\n\n# Restore\npsql -h localhost -U hafiz hafiz &lt; hafiz-backup-20240101.sql\n</code></pre>"},{"location":"operations/backup/#kubernetes-cronjob","title":"Kubernetes CronJob","text":"<pre><code>apiVersion: batch/v1\nkind: CronJob\nmetadata:\n  name: hafiz-backup\nspec:\n  schedule: \"0 2 * * *\"\n  jobTemplate:\n    spec:\n      template:\n        spec:\n          containers:\n            - name: backup\n              image: postgres:15\n              command:\n                - pg_dump\n                - -h\n                - postgres\n                - -U\n                - hafiz\n              volumeMounts:\n                - name: backup\n                  mountPath: /backup\n</code></pre>"},{"location":"operations/backup/#data-backup","title":"Data Backup","text":""},{"location":"operations/backup/#filesystem","title":"Filesystem","text":"<pre><code># Backup\ntar czf hafiz-data-$(date +%Y%m%d).tar.gz /data\n\n# Restore\ntar xzf hafiz-data-20240101.tar.gz -C /\n</code></pre>"},{"location":"operations/backup/#volume-snapshots","title":"Volume Snapshots","text":"<p>Use cloud provider volume snapshots for faster recovery.</p>"},{"location":"operations/backup/#disaster-recovery","title":"Disaster Recovery","text":"<ol> <li>Restore PostgreSQL from backup</li> <li>Restore data files</li> <li>Start Hafiz</li> <li>Verify with health check</li> </ol>"},{"location":"operations/monitoring/","title":"Monitoring","text":""},{"location":"operations/monitoring/#prometheus-metrics","title":"Prometheus Metrics","text":"<p>Hafiz exposes metrics at <code>/metrics</code> on port 9090.</p>"},{"location":"operations/monitoring/#enable-metrics","title":"Enable Metrics","text":"<pre><code>HAFIZ_METRICS_ENABLED=true\nHAFIZ_METRICS_PORT=9090\n</code></pre>"},{"location":"operations/monitoring/#key-metrics","title":"Key Metrics","text":"Metric Type Description <code>hafiz_requests_total</code> Counter Total requests <code>hafiz_request_duration_seconds</code> Histogram Request latency <code>hafiz_objects_total</code> Gauge Object count <code>hafiz_storage_bytes</code> Gauge Storage used <code>hafiz_active_connections</code> Gauge Active connections"},{"location":"operations/monitoring/#prometheus-config","title":"Prometheus Config","text":"<pre><code>scrape_configs:\n  - job_name: 'hafiz'\n    static_configs:\n      - targets: ['hafiz:9090']\n</code></pre>"},{"location":"operations/monitoring/#grafana-dashboard","title":"Grafana Dashboard","text":"<p>Import the dashboard from: <pre><code>deploy/grafana/dashboards/hafiz.json\n</code></pre></p>"},{"location":"operations/monitoring/#alerts","title":"Alerts","text":"<p>Example PrometheusRule:</p> <pre><code>groups:\n  - name: hafiz\n    rules:\n      - alert: HafizHighErrorRate\n        expr: rate(hafiz_requests_total{status=\"error\"}[5m]) &gt; 0.1\n        for: 5m\n        labels:\n          severity: warning\n</code></pre>"},{"location":"operations/monitoring/#health-checks","title":"Health Checks","text":"<pre><code># Health\ncurl http://localhost:9000/health\n\n# Readiness\ncurl http://localhost:9000/ready\n\n# Liveness\ncurl http://localhost:9000/live\n</code></pre>"},{"location":"operations/troubleshooting/","title":"Troubleshooting","text":""},{"location":"operations/troubleshooting/#common-issues","title":"Common Issues","text":""},{"location":"operations/troubleshooting/#connection-refused","title":"Connection Refused","text":"<pre><code># Check if service is running\nsystemctl status hafiz\n\n# Check port binding\nss -tlnp | grep 9000\n</code></pre>"},{"location":"operations/troubleshooting/#authentication-failed","title":"Authentication Failed","text":"<pre><code># Verify credentials\necho $HAFIZ_ROOT_ACCESS_KEY\necho $HAFIZ_ROOT_SECRET_KEY\n\n# Check signature\naws --endpoint-url http://localhost:9000 s3 ls --debug\n</code></pre>"},{"location":"operations/troubleshooting/#database-connection","title":"Database Connection","text":"<pre><code># Test PostgreSQL\npsql -h localhost -U hafiz -d hafiz -c \"SELECT 1\"\n\n# Check connection string\necho $HAFIZ_DATABASE_URL\n</code></pre>"},{"location":"operations/troubleshooting/#disk-full","title":"Disk Full","text":"<pre><code># Check disk space\ndf -h /data\n\n# Find large objects\nhafiz du -H s3://\n</code></pre>"},{"location":"operations/troubleshooting/#logs","title":"Logs","text":""},{"location":"operations/troubleshooting/#docker","title":"Docker","text":"<pre><code>docker logs hafiz\ndocker logs -f hafiz  # Follow\n</code></pre>"},{"location":"operations/troubleshooting/#kubernetes","title":"Kubernetes","text":"<pre><code>kubectl logs -f deployment/hafiz -n hafiz\n</code></pre>"},{"location":"operations/troubleshooting/#systemd","title":"Systemd","text":"<pre><code>journalctl -u hafiz -f\n</code></pre>"},{"location":"operations/troubleshooting/#debug-mode","title":"Debug Mode","text":"<pre><code>HAFIZ_LOG_LEVEL=debug hafiz-server\n</code></pre>"},{"location":"operations/troubleshooting/#getting-help","title":"Getting Help","text":"<ul> <li>GitHub Issues</li> <li>Discussions</li> </ul>"},{"location":"user-guide/","title":"User Guide","text":"<p>This guide covers everything you need to know about using Hafiz.</p>"},{"location":"user-guide/#core-concepts","title":"Core Concepts","text":"<ul> <li> <p> Buckets</p> <p>Create, configure, and manage storage containers.</p> <p> Buckets</p> </li> <li> <p> Objects</p> <p>Upload, download, and manage objects.</p> <p> Objects</p> </li> <li> <p> Versioning</p> <p>Keep multiple versions of objects.</p> <p> Versioning</p> </li> <li> <p> Access Control</p> <p>Control who can access your data.</p> <p> Access Control</p> </li> <li> <p> Encryption</p> <p>Encrypt data at rest and in transit.</p> <p> Encryption</p> </li> <li> <p> Object Lock</p> <p>WORM compliance for regulatory requirements.</p> <p> Object Lock</p> </li> </ul>"},{"location":"user-guide/#quick-examples","title":"Quick Examples","text":"PythonJavaScriptAWS CLI <pre><code>import boto3\n\ns3 = boto3.client('s3',\n    endpoint_url='http://localhost:9000',\n    aws_access_key_id='hafizadmin',\n    aws_secret_access_key='hafizadmin'\n)\n\n# Upload\ns3.put_object(Bucket='my-bucket', Key='file.txt', Body=b'Hello!')\n</code></pre> <pre><code>import { S3Client, PutObjectCommand } from \"@aws-sdk/client-s3\";\n\nconst client = new S3Client({\n  endpoint: \"http://localhost:9000\",\n  forcePathStyle: true,\n});\n\nawait client.send(new PutObjectCommand({\n  Bucket: \"my-bucket\",\n  Key: \"file.txt\",\n  Body: \"Hello!\",\n}));\n</code></pre> <pre><code>aws --endpoint-url http://localhost:9000 \\\n    s3 cp file.txt s3://my-bucket/\n</code></pre>"},{"location":"user-guide/access-control/","title":"Access Control","text":"<p>Hafiz provides multiple layers of access control to secure your data.</p>"},{"location":"user-guide/access-control/#authentication","title":"Authentication","text":""},{"location":"user-guide/access-control/#aws-signature-v4","title":"AWS Signature V4","text":"<p>All requests must be signed using AWS Signature Version 4:</p> <pre><code># AWS CLI handles this automatically\naws --endpoint-url http://localhost:9000 s3 ls\n\n# Or set credentials\nexport AWS_ACCESS_KEY_ID=your-access-key\nexport AWS_SECRET_ACCESS_KEY=your-secret-key\n</code></pre>"},{"location":"user-guide/access-control/#ldap-integration","title":"LDAP Integration","text":"<p>Connect to enterprise directory services:</p> <pre><code># Configure LDAP\nHAFIZ_LDAP_ENABLED=true\nHAFIZ_LDAP_URL=ldap://ldap.example.com:389\nHAFIZ_LDAP_BASE_DN=dc=example,dc=com\n</code></pre>"},{"location":"user-guide/access-control/#bucket-policies","title":"Bucket Policies","text":"<p>IAM-style policies for fine-grained access control.</p>"},{"location":"user-guide/access-control/#policy-structure","title":"Policy Structure","text":"<pre><code>{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"AllowPublicRead\",\n      \"Effect\": \"Allow\",\n      \"Principal\": \"*\",\n      \"Action\": \"s3:GetObject\",\n      \"Resource\": \"arn:aws:s3:::my-bucket/*\"\n    }\n  ]\n}\n</code></pre>"},{"location":"user-guide/access-control/#apply-policy","title":"Apply Policy","text":"<pre><code>aws --endpoint-url http://localhost:9000 s3api put-bucket-policy \\\n    --bucket my-bucket \\\n    --policy file://policy.json\n</code></pre>"},{"location":"user-guide/access-control/#common-policy-examples","title":"Common Policy Examples","text":""},{"location":"user-guide/access-control/#public-read-access","title":"Public Read Access","text":"<pre><code>{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Effect\": \"Allow\",\n      \"Principal\": \"*\",\n      \"Action\": \"s3:GetObject\",\n      \"Resource\": \"arn:aws:s3:::public-bucket/*\"\n    }\n  ]\n}\n</code></pre>"},{"location":"user-guide/access-control/#restrict-by-ip","title":"Restrict by IP","text":"<pre><code>{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Effect\": \"Allow\",\n      \"Principal\": \"*\",\n      \"Action\": \"s3:*\",\n      \"Resource\": \"arn:aws:s3:::my-bucket/*\",\n      \"Condition\": {\n        \"IpAddress\": {\n          \"aws:SourceIp\": \"192.168.1.0/24\"\n        }\n      }\n    }\n  ]\n}\n</code></pre>"},{"location":"user-guide/access-control/#read-only-user","title":"Read-Only User","text":"<pre><code>{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Effect\": \"Allow\",\n      \"Principal\": {\"AWS\": \"arn:aws:iam::user/readonly\"},\n      \"Action\": [\n        \"s3:GetObject\",\n        \"s3:ListBucket\"\n      ],\n      \"Resource\": [\n        \"arn:aws:s3:::my-bucket\",\n        \"arn:aws:s3:::my-bucket/*\"\n      ]\n    }\n  ]\n}\n</code></pre>"},{"location":"user-guide/access-control/#supported-actions","title":"Supported Actions","text":"Action Description <code>s3:GetObject</code> Download objects <code>s3:PutObject</code> Upload objects <code>s3:DeleteObject</code> Delete objects <code>s3:ListBucket</code> List bucket contents <code>s3:GetBucketPolicy</code> Read bucket policy <code>s3:PutBucketPolicy</code> Write bucket policy <code>s3:*</code> All actions"},{"location":"user-guide/access-control/#condition-keys","title":"Condition Keys","text":"Key Description <code>aws:SourceIp</code> Client IP address <code>aws:CurrentTime</code> Current time <code>aws:SecureTransport</code> HTTPS required <code>s3:prefix</code> Object key prefix <code>s3:max-keys</code> Maximum list results"},{"location":"user-guide/access-control/#user-management","title":"User Management","text":"<p>Create and manage users via the Admin API:</p> <pre><code># Create user\ncurl -X POST http://localhost:9001/api/v1/users \\\n    -H \"Authorization: Bearer $TOKEN\" \\\n    -d '{\"username\": \"alice\", \"access_key\": \"...\", \"secret_key\": \"...\"}'\n</code></pre>"},{"location":"user-guide/access-control/#best-practices","title":"Best Practices","text":"<ol> <li>Principle of least privilege - Grant only necessary permissions</li> <li>Use bucket policies - Prefer policies over public access</li> <li>Enable TLS - Always use HTTPS in production</li> <li>Rotate credentials - Regular key rotation</li> <li>Audit access - Enable access logging</li> </ol>"},{"location":"user-guide/buckets/","title":"Buckets","text":"<p>Buckets are containers for storing objects. Every object in Hafiz must belong to a bucket.</p>"},{"location":"user-guide/buckets/#creating-a-bucket","title":"Creating a Bucket","text":"AWS CLIHafiz CLIPython <pre><code>aws --endpoint-url http://localhost:9000 s3 mb s3://my-bucket\n</code></pre> <pre><code>hafiz mb s3://my-bucket\n</code></pre> <pre><code>s3.create_bucket(Bucket='my-bucket')\n</code></pre>"},{"location":"user-guide/buckets/#listing-buckets","title":"Listing Buckets","text":"<pre><code># AWS CLI\naws --endpoint-url http://localhost:9000 s3 ls\n\n# Hafiz CLI\nhafiz ls s3://\n</code></pre>"},{"location":"user-guide/buckets/#deleting-a-bucket","title":"Deleting a Bucket","text":"<p>Bucket must be empty</p> <p>You must delete all objects before deleting a bucket.</p> <pre><code># Delete empty bucket\naws --endpoint-url http://localhost:9000 s3 rb s3://my-bucket\n\n# Force delete (delete all objects first)\nhafiz rb s3://my-bucket --force\n</code></pre>"},{"location":"user-guide/buckets/#bucket-naming-rules","title":"Bucket Naming Rules","text":"<ul> <li>3-63 characters long</li> <li>Lowercase letters, numbers, and hyphens only</li> <li>Must start with a letter or number</li> <li>Cannot be formatted as an IP address</li> </ul> <p>Valid names</p> <p><code>my-bucket</code>, <code>data-2024</code>, <code>backup-logs</code></p> <p>Invalid names</p> <p><code>My-Bucket</code>, <code>my_bucket</code>, <code>192.168.1.1</code></p>"},{"location":"user-guide/buckets/#bucket-properties","title":"Bucket Properties","text":""},{"location":"user-guide/buckets/#versioning","title":"Versioning","text":"<p>Enable versioning to keep multiple versions of objects:</p> <pre><code>aws --endpoint-url http://localhost:9000 s3api put-bucket-versioning \\\n    --bucket my-bucket \\\n    --versioning-configuration Status=Enabled\n</code></pre>"},{"location":"user-guide/buckets/#lifecycle-rules","title":"Lifecycle Rules","text":"<p>Automatically expire or transition objects:</p> <pre><code>aws --endpoint-url http://localhost:9000 s3api put-bucket-lifecycle-configuration \\\n    --bucket my-bucket \\\n    --lifecycle-configuration file://lifecycle.json\n</code></pre>"},{"location":"user-guide/buckets/#bucket-policy","title":"Bucket Policy","text":"<p>Control access with IAM-style policies:</p> <pre><code>{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Effect\": \"Allow\",\n      \"Principal\": \"*\",\n      \"Action\": \"s3:GetObject\",\n      \"Resource\": \"arn:aws:s3:::my-bucket/*\"\n    }\n  ]\n}\n</code></pre>"},{"location":"user-guide/buckets/#bucket-information","title":"Bucket Information","text":"<pre><code># Get bucket location\naws --endpoint-url http://localhost:9000 s3api get-bucket-location \\\n    --bucket my-bucket\n\n# Get versioning status\naws --endpoint-url http://localhost:9000 s3api get-bucket-versioning \\\n    --bucket my-bucket\n\n# Hafiz CLI - detailed info\nhafiz info s3://my-bucket\n</code></pre>"},{"location":"user-guide/encryption/","title":"Encryption","text":"<p>Hafiz supports server-side encryption (SSE) to protect your data at rest.</p>"},{"location":"user-guide/encryption/#encryption-methods","title":"Encryption Methods","text":"Method Description Key Management SSE-S3 Hafiz-managed keys Automatic SSE-C Customer-provided keys You manage"},{"location":"user-guide/encryption/#enable-encryption","title":"Enable Encryption","text":""},{"location":"user-guide/encryption/#server-side-encryption-default","title":"Server-Side Encryption (Default)","text":"<pre><code># Enable globally\nHAFIZ_ENCRYPTION_ENABLED=true\nHAFIZ_ENCRYPTION_MASTER_KEY=$(openssl rand -base64 32)\n</code></pre>"},{"location":"user-guide/encryption/#per-object-encryption","title":"Per-Object Encryption","text":"<pre><code>aws --endpoint-url http://localhost:9000 s3 cp file.txt s3://my-bucket/ \\\n    --sse AES256\n</code></pre>"},{"location":"user-guide/encryption/#customer-provided-keys-sse-c","title":"Customer-Provided Keys (SSE-C)","text":"<pre><code># Generate a key\nKEY=$(openssl rand -base64 32)\nKEY_MD5=$(echo -n \"$KEY\" | openssl dgst -md5 -binary | base64)\n\n# Upload with SSE-C\naws --endpoint-url http://localhost:9000 s3 cp file.txt s3://my-bucket/ \\\n    --sse-c AES256 \\\n    --sse-c-key \"$KEY\"\n\n# Download (must provide same key)\naws --endpoint-url http://localhost:9000 s3 cp s3://my-bucket/file.txt . \\\n    --sse-c AES256 \\\n    --sse-c-key \"$KEY\"\n</code></pre>"},{"location":"user-guide/encryption/#encryption-details","title":"Encryption Details","text":""},{"location":"user-guide/encryption/#algorithm","title":"Algorithm","text":"<ul> <li>AES-256-GCM - Authenticated encryption</li> <li>256-bit keys</li> <li>Per-object unique nonce</li> </ul>"},{"location":"user-guide/encryption/#key-derivation","title":"Key Derivation","text":"<pre><code>Master Key (from config)\n        \u2502\n        \u25bc\n    HKDF-SHA256\n        \u2502\n        \u25bc\nData Encryption Key (per object)\n</code></pre>"},{"location":"user-guide/encryption/#bucket-default-encryption","title":"Bucket Default Encryption","text":"<p>Set default encryption for all new objects:</p> <pre><code>aws --endpoint-url http://localhost:9000 s3api put-bucket-encryption \\\n    --bucket my-bucket \\\n    --server-side-encryption-configuration '{\n      \"Rules\": [{\n        \"ApplyServerSideEncryptionByDefault\": {\n          \"SSEAlgorithm\": \"AES256\"\n        }\n      }]\n    }'\n</code></pre>"},{"location":"user-guide/encryption/#verify-encryption","title":"Verify Encryption","text":"<pre><code># Check object encryption\naws --endpoint-url http://localhost:9000 s3api head-object \\\n    --bucket my-bucket \\\n    --key file.txt\n\n# Output includes:\n# \"ServerSideEncryption\": \"AES256\"\n</code></pre>"},{"location":"user-guide/encryption/#tls-encryption-in-transit","title":"TLS (Encryption in Transit)","text":"<p>Enable TLS for network encryption:</p> <pre><code>HAFIZ_TLS_ENABLED=true\nHAFIZ_TLS_CERT_PATH=/etc/hafiz/tls.crt\nHAFIZ_TLS_KEY_PATH=/etc/hafiz/tls.key\n</code></pre>"},{"location":"user-guide/encryption/#best-practices","title":"Best Practices","text":"<p>Recommendations</p> <ol> <li>Enable encryption globally - Don't rely on per-object encryption</li> <li>Secure master key - Store in secrets management (Vault, K8s Secrets)</li> <li>Use TLS - Always encrypt data in transit</li> <li>Rotate keys - Plan for key rotation</li> <li>Backup keys - Encrypted data is lost if keys are lost</li> </ol>"},{"location":"user-guide/encryption/#compliance","title":"Compliance","text":"<p>Hafiz encryption helps meet:</p> <ul> <li>HIPAA - Healthcare data protection</li> <li>PCI-DSS - Payment card security</li> <li>GDPR - European data privacy</li> <li>SOC 2 - Security controls</li> </ul>"},{"location":"user-guide/object-lock/","title":"Object Lock","text":"<p>Object Lock provides Write-Once-Read-Many (WORM) protection for regulatory compliance.</p>"},{"location":"user-guide/object-lock/#overview","title":"Overview","text":"<p>Object Lock prevents objects from being deleted or overwritten for a specified period or indefinitely.</p> <p>Compliance</p> <p>Object Lock helps meet SEC 17a-4, FINRA 4511, HIPAA, and GDPR requirements.</p>"},{"location":"user-guide/object-lock/#retention-modes","title":"Retention Modes","text":""},{"location":"user-guide/object-lock/#governance-mode","title":"Governance Mode","text":"<ul> <li>Can be overridden by users with special permissions</li> <li>Suitable for general data protection</li> </ul>"},{"location":"user-guide/object-lock/#compliance-mode","title":"Compliance Mode","text":"<ul> <li>Cannot be overridden by anyone, including root user</li> <li>Cannot be shortened, only extended</li> <li>Required for financial regulations (SEC 17a-4)</li> </ul> <p>Compliance Mode is Permanent</p> <p>Once set, Compliance mode retention cannot be reduced. Choose carefully!</p>"},{"location":"user-guide/object-lock/#enable-object-lock","title":"Enable Object Lock","text":"<p>Object Lock must be enabled when creating the bucket:</p> <pre><code>aws --endpoint-url http://localhost:9000 s3api create-bucket \\\n    --bucket compliance-bucket \\\n    --object-lock-enabled-for-bucket\n</code></pre>"},{"location":"user-guide/object-lock/#set-default-retention","title":"Set Default Retention","text":"<pre><code>aws --endpoint-url http://localhost:9000 s3api put-object-lock-configuration \\\n    --bucket compliance-bucket \\\n    --object-lock-configuration '{\n      \"ObjectLockEnabled\": \"Enabled\",\n      \"Rule\": {\n        \"DefaultRetention\": {\n          \"Mode\": \"COMPLIANCE\",\n          \"Days\": 365\n        }\n      }\n    }'\n</code></pre>"},{"location":"user-guide/object-lock/#per-object-retention","title":"Per-Object Retention","text":"<pre><code># Set retention when uploading\naws --endpoint-url http://localhost:9000 s3api put-object \\\n    --bucket compliance-bucket \\\n    --key document.pdf \\\n    --body document.pdf \\\n    --object-lock-mode COMPLIANCE \\\n    --object-lock-retain-until-date 2025-12-31T00:00:00Z\n\n# Update retention (can only extend)\naws --endpoint-url http://localhost:9000 s3api put-object-retention \\\n    --bucket compliance-bucket \\\n    --key document.pdf \\\n    --retention '{\n      \"Mode\": \"COMPLIANCE\",\n      \"RetainUntilDate\": \"2026-12-31T00:00:00Z\"\n    }'\n</code></pre>"},{"location":"user-guide/object-lock/#legal-hold","title":"Legal Hold","text":"<p>Legal hold prevents deletion regardless of retention settings:</p> <pre><code># Enable legal hold\naws --endpoint-url http://localhost:9000 s3api put-object-legal-hold \\\n    --bucket compliance-bucket \\\n    --key document.pdf \\\n    --legal-hold '{\"Status\": \"ON\"}'\n\n# Remove legal hold (requires permission)\naws --endpoint-url http://localhost:9000 s3api put-object-legal-hold \\\n    --bucket compliance-bucket \\\n    --key document.pdf \\\n    --legal-hold '{\"Status\": \"OFF\"}'\n</code></pre>"},{"location":"user-guide/object-lock/#check-lock-status","title":"Check Lock Status","text":"<pre><code># Get retention\naws --endpoint-url http://localhost:9000 s3api get-object-retention \\\n    --bucket compliance-bucket \\\n    --key document.pdf\n\n# Get legal hold\naws --endpoint-url http://localhost:9000 s3api get-object-legal-hold \\\n    --bucket compliance-bucket \\\n    --key document.pdf\n</code></pre>"},{"location":"user-guide/object-lock/#compliance-matrix","title":"Compliance Matrix","text":"Regulation Mode Retention Notes SEC 17a-4 Compliance As required Financial records FINRA 4511 Compliance 6+ years Broker-dealer records HIPAA Either 6+ years Healthcare records GDPR Governance Varies Right to erasure considerations"},{"location":"user-guide/object-lock/#best-practices","title":"Best Practices","text":"<ol> <li>Test with Governance first - Before using Compliance mode</li> <li>Document retention policies - Know requirements before setting</li> <li>Use Legal Hold for litigation - Preserve evidence</li> <li>Enable versioning - Required for Object Lock</li> <li>Plan storage costs - Locked objects consume space</li> </ol>"},{"location":"user-guide/objects/","title":"Objects","text":"<p>Objects are the fundamental entities stored in Hafiz. Each object consists of data, a key (name), and metadata.</p>"},{"location":"user-guide/objects/#uploading-objects","title":"Uploading Objects","text":"AWS CLIHafiz CLIPython <pre><code># Single file\naws --endpoint-url http://localhost:9000 s3 cp file.txt s3://my-bucket/\n\n# With specific key\naws --endpoint-url http://localhost:9000 s3 cp file.txt s3://my-bucket/folder/renamed.txt\n\n# Directory (recursive)\naws --endpoint-url http://localhost:9000 s3 cp ./data/ s3://my-bucket/data/ --recursive\n</code></pre> <pre><code>hafiz cp file.txt s3://my-bucket/\nhafiz cp -r ./data/ s3://my-bucket/data/\n</code></pre> <pre><code># From file\ns3.upload_file('file.txt', 'my-bucket', 'file.txt')\n\n# From bytes\ns3.put_object(Bucket='my-bucket', Key='hello.txt', Body=b'Hello World!')\n</code></pre>"},{"location":"user-guide/objects/#downloading-objects","title":"Downloading Objects","text":"<pre><code># AWS CLI\naws --endpoint-url http://localhost:9000 s3 cp s3://my-bucket/file.txt ./\n\n# Hafiz CLI\nhafiz cp s3://my-bucket/file.txt ./\n</code></pre>"},{"location":"user-guide/objects/#listing-objects","title":"Listing Objects","text":"<pre><code># List all objects\nhafiz ls s3://my-bucket/\n\n# With prefix\nhafiz ls s3://my-bucket/folder/\n\n# Long format (size, date)\nhafiz ls -l s3://my-bucket/\n\n# Human-readable sizes\nhafiz ls -lH s3://my-bucket/\n</code></pre>"},{"location":"user-guide/objects/#deleting-objects","title":"Deleting Objects","text":"<pre><code># Single object\nhafiz rm s3://my-bucket/file.txt\n\n# Multiple objects (by prefix)\nhafiz rm -r s3://my-bucket/old-logs/\n\n# With confirmation\nhafiz rm s3://my-bucket/important.txt  # Prompts for confirmation\n\n# Force (no confirmation)\nhafiz rm -f s3://my-bucket/file.txt\n</code></pre>"},{"location":"user-guide/objects/#object-metadata","title":"Object Metadata","text":""},{"location":"user-guide/objects/#get-metadata","title":"Get Metadata","text":"<pre><code>hafiz head s3://my-bucket/file.txt\n</code></pre> <p>Output: <pre><code>s3://my-bucket/file.txt\n\n  Content-Type: text/plain\n  Content-Length: 1024 (1 KiB)\n  Last-Modified: 2024-01-01 00:00:00 UTC\n  ETag: \"d41d8cd98f00b204e9800998ecf8427e\"\n  Storage-Class: STANDARD\n</code></pre></p>"},{"location":"user-guide/objects/#custom-metadata","title":"Custom Metadata","text":"<pre><code>aws --endpoint-url http://localhost:9000 s3 cp file.txt s3://my-bucket/ \\\n    --metadata '{\"author\":\"john\",\"version\":\"1.0\"}'\n</code></pre>"},{"location":"user-guide/objects/#content-types","title":"Content Types","text":"<p>Hafiz automatically detects content types, or you can specify them:</p> <pre><code>hafiz cp image.png s3://my-bucket/ --content-type image/png\n</code></pre>"},{"location":"user-guide/objects/#large-files","title":"Large Files","text":"<p>For files larger than 5GB, use multipart upload:</p> <pre><code># Automatic with AWS CLI\naws --endpoint-url http://localhost:9000 s3 cp large-file.zip s3://my-bucket/\n\n# Configure thresholds\naws configure set s3.multipart_threshold 64MB\naws configure set s3.multipart_chunksize 16MB\n</code></pre>"},{"location":"user-guide/objects/#presigned-urls","title":"Presigned URLs","text":"<p>Generate temporary URLs for direct access:</p> <pre><code># Download URL (1 hour)\nhafiz presign s3://my-bucket/file.txt\n\n# Custom expiration (24 hours)\nhafiz presign s3://my-bucket/file.txt --expires 86400\n\n# Upload URL\nhafiz presign s3://my-bucket/upload.txt --method PUT\n</code></pre>"},{"location":"user-guide/objects/#streaming-content","title":"Streaming Content","text":"<pre><code># Stream to stdout\nhafiz cat s3://my-bucket/log.txt\n\n# Pipe to command\nhafiz cat s3://my-bucket/data.json | jq .\n\n# Pipe from command\necho \"Hello\" | hafiz cp - s3://my-bucket/hello.txt\n</code></pre>"},{"location":"user-guide/versioning/","title":"Versioning","text":"<p>Versioning allows you to keep multiple versions of an object in the same bucket. This provides protection against accidental deletions and overwrites.</p>"},{"location":"user-guide/versioning/#enabling-versioning","title":"Enabling Versioning","text":"<pre><code>aws --endpoint-url http://localhost:9000 s3api put-bucket-versioning \\\n    --bucket my-bucket \\\n    --versioning-configuration Status=Enabled\n</code></pre>"},{"location":"user-guide/versioning/#check-versioning-status","title":"Check Versioning Status","text":"<pre><code>aws --endpoint-url http://localhost:9000 s3api get-bucket-versioning \\\n    --bucket my-bucket\n</code></pre>"},{"location":"user-guide/versioning/#how-versioning-works","title":"How Versioning Works","text":"<pre><code>graph TD\n    A[Upload file.txt v1] --&gt; B[file.txt exists]\n    B --&gt; C[Upload file.txt v2]\n    C --&gt; D[Both versions exist]\n    D --&gt; E[Get file.txt returns v2]\n    D --&gt; F[Can retrieve v1 by version ID]</code></pre>"},{"location":"user-guide/versioning/#working-with-versions","title":"Working with Versions","text":""},{"location":"user-guide/versioning/#list-all-versions","title":"List All Versions","text":"<pre><code>aws --endpoint-url http://localhost:9000 s3api list-object-versions \\\n    --bucket my-bucket\n</code></pre>"},{"location":"user-guide/versioning/#get-specific-version","title":"Get Specific Version","text":"<pre><code>aws --endpoint-url http://localhost:9000 s3api get-object \\\n    --bucket my-bucket \\\n    --key file.txt \\\n    --version-id \"abc123\" \\\n    output.txt\n</code></pre>"},{"location":"user-guide/versioning/#delete-specific-version","title":"Delete Specific Version","text":"<pre><code>aws --endpoint-url http://localhost:9000 s3api delete-object \\\n    --bucket my-bucket \\\n    --key file.txt \\\n    --version-id \"abc123\"\n</code></pre>"},{"location":"user-guide/versioning/#delete-markers","title":"Delete Markers","text":"<p>When you delete an object in a versioned bucket, Hafiz creates a delete marker instead of permanently deleting the object.</p> <pre><code># This creates a delete marker\naws --endpoint-url http://localhost:9000 s3 rm s3://my-bucket/file.txt\n\n# The object appears deleted\naws --endpoint-url http://localhost:9000 s3 ls s3://my-bucket/file.txt\n# (no output)\n\n# But versions still exist\naws --endpoint-url http://localhost:9000 s3api list-object-versions \\\n    --bucket my-bucket --prefix file.txt\n# Shows all versions + delete marker\n</code></pre>"},{"location":"user-guide/versioning/#restore-deleted-object","title":"Restore Deleted Object","text":"<p>Delete the delete marker to restore the object:</p> <pre><code>aws --endpoint-url http://localhost:9000 s3api delete-object \\\n    --bucket my-bucket \\\n    --key file.txt \\\n    --version-id \"delete-marker-version-id\"\n</code></pre>"},{"location":"user-guide/versioning/#suspending-versioning","title":"Suspending Versioning","text":"<pre><code>aws --endpoint-url http://localhost:9000 s3api put-bucket-versioning \\\n    --bucket my-bucket \\\n    --versioning-configuration Status=Suspended\n</code></pre> <p>Note</p> <p>Suspending versioning doesn't delete existing versions. New uploads will have <code>null</code> version ID.</p>"},{"location":"user-guide/versioning/#mfa-delete","title":"MFA Delete","text":"<p>For additional protection, enable MFA Delete to require multi-factor authentication for:</p> <ul> <li>Permanently deleting object versions</li> <li>Changing versioning state</li> </ul> <p>Admin API required</p> <p>MFA Delete configuration requires the Admin API.</p>"},{"location":"user-guide/versioning/#best-practices","title":"Best Practices","text":"<ol> <li>Enable versioning early - Turn it on before storing important data</li> <li>Use lifecycle rules - Automatically delete old versions</li> <li>Monitor storage - Versions consume storage space</li> <li>Protect with Object Lock - Combine with WORM for compliance</li> </ol>"}]}